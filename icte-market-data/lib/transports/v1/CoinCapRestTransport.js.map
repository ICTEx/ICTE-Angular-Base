{"version":3,"sources":["lib.js"],"names":["__awaiter","_0xe29399","_0x101acf","_0x528497","_0x148a70","Promise","_0x4d149d","_0x382d05","_0x120f69","_0x26a88b","_0x45ecb6","_0x411bb9","_0x5d04c","_0x2dcd20","_0x3c0b37","_0x2df970","__generator","_0x28084d","_0x12a6bd","_0x4cfac7","_0x2804a4","_0x310ce0","_0x56f39b","_0x1f179e","Symbol","_0x10cf64","_0x5e1bae","_0x332590","_0x323d3e","_0xa9ba0e","TypeError","_0x5968f7","Object","exports","CoinCapConstant_1","require","MdConstant_1","MsgFactory_1","MdUtils_1","axios_1","CoinCapRestTransport","_0x23d553","_0x11cd6b","_0x1328f0","_0x24791e","setInterval","_0x13f8dd","_0x1d9bc3","_0x12857a","_0x4d923b","_0x59b582","Math","_0x55a22a","_0x1d21a9","_0x3197d5","_0x3b4f8e","_0x5691cb","_0x43991a","_0x1b13b6","_0x4f098f","_0x346afd","_0x5c1045","undefined","_0x297223","_0x90ed0b","_0xc8b3a2","baseSymbol","MdConstant","COINSID","quoteSymbol","trunc","priceQuote","CoinCapConstant","DIV","volumeUsd24Hr"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CoinCapConstant_1 = require(\"./CoinCapConstant\");\r\nvar MdConstant_1 = require(\"../api/MdConstant\");\r\nvar MsgFactory_1 = require(\"./MsgFactory\");\r\nvar MdUtils_1 = require(\"../api/MdUtils\");\r\nvar axios_1 = require(\"axios\");\r\nvar CoinCapRestTransport = /** @class */ (function () {\r\n    function CoinCapRestTransport(callback) {\r\n        this.subscriptions = {};\r\n        this.pairs = [];\r\n        this._connected = false;\r\n        this._elapsedTimeMs = 2000;\r\n        this.restClient = axios_1.default.create({\r\n            method: 'get',\r\n            baseURL: 'https://api.coincap.io',\r\n            timeout: 1000,\r\n            withCredentials: false,\r\n            responseType: 'json'\r\n        });\r\n        this.cb = callback;\r\n    }\r\n    CoinCapRestTransport.prototype.connect = function (symbols) {\r\n        this.init();\r\n    };\r\n    CoinCapRestTransport.prototype.isConnected = function () {\r\n        return this._connected;\r\n    };\r\n    CoinCapRestTransport.prototype.init = function () {\r\n        var _this = this;\r\n        this._pullMarket = setInterval(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getData()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.sendData()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this._elapsedTimeMs);\r\n    };\r\n    CoinCapRestTransport.prototype.sendData = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.pairs.forEach(function (pair) {\r\n                            var cqMsg = MsgFactory_1.MsgFactory.priceMsg;\r\n                            var price = _this.subscriptions[pair].price;\r\n                            var volume = _this.subscriptions[pair].volume;\r\n                            cqMsg.buffer(MdUtils_1.MdUtils.getMsSinceMidnight(), _this.subscriptions[pair].symbolId, Math.trunc(price), Math.trunc(price % 1 * CoinCapConstant_1.CoinCapConstant.DIV), 0, 0, Math.trunc(volume), Math.trunc(volume % 1 * CoinCapConstant_1.CoinCapConstant.DIV), MdConstant_1.MdConstant.CoinCapTransport, _this.subscriptions[pair].benchmark);\r\n                            _this.cb.on(cqMsg);\r\n                        })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CoinCapRestTransport.prototype.getData = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _loop_1, this_1, i;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _loop_1 = function (i) {\r\n                            var tmpArray, rawData;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        tmpArray = {};\r\n                                        return [4 /*yield*/, this_1.restClient.get(\"/v2/markets\", { params: { baseSymbol: CoinCapConstant_1.CoinCapConstant.SUBSCRIBE[i] } })];\r\n                                    case 1:\r\n                                        rawData = _a.sent();\r\n                                        if (!rawData.data) return [3 /*break*/, 3];\r\n                                        return [4 /*yield*/, rawData.data.data.forEach(function (row) {\r\n                                                if (MdConstant_1.MdConstant.COINSID[row.quoteSymbol] != undefined) {\r\n                                                    var pair = row.quoteSymbol + \"-\" + row.baseSymbol;\r\n                                                    if (_this.pairs.indexOf(pair) < 0)\r\n                                                        _this.pairs.push(pair);\r\n                                                    //sort control\r\n                                                    if (tmpArray[pair] == undefined) {\r\n                                                        tmpArray[pair] = [];\r\n                                                    }\r\n                                                    tmpArray[pair].push(row);\r\n                                                    tmpArray[pair].sort(function (a, b) {\r\n                                                        if (a.priceQuote < b.priceQuote)\r\n                                                            return -1;\r\n                                                        if (a.priceQuote > b.priceQuote)\r\n                                                            return 1;\r\n                                                        return 0;\r\n                                                    });\r\n                                                    _this.subscriptions[pair] = {\r\n                                                        symbol: row.baseSymbol,\r\n                                                        symbolId: MdConstant_1.MdConstant.COINSID[row.baseSymbol],\r\n                                                        benchmark: MdConstant_1.MdConstant.COINSID[row.quoteSymbol],\r\n                                                        price: Math.trunc(tmpArray[pair][0].priceQuote * CoinCapConstant_1.CoinCapConstant.DIV) / CoinCapConstant_1.CoinCapConstant.DIV,\r\n                                                        volume: Math.trunc(tmpArray[pair][0].volumeUsd24Hr * CoinCapConstant_1.CoinCapConstant.DIV) / CoinCapConstant_1.CoinCapConstant.DIV\r\n                                                    };\r\n                                                }\r\n                                            })];\r\n                                    case 2:\r\n                                        _a.sent();\r\n                                        _a.label = 3;\r\n                                    case 3: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        this_1 = this;\r\n                        i = 0;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(i < CoinCapConstant_1.CoinCapConstant.SUBSCRIBE.length)) return [3 /*break*/, 4];\r\n                        return [5 /*yield**/, _loop_1(i)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return CoinCapRestTransport;\r\n}());\r\nexports.CoinCapRestTransport = CoinCapRestTransport;\r\n"]}