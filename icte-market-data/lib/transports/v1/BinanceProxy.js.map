{"version":3,"sources":["lib.js"],"names":["__extends","_0x261129","_0xcfb0b3","_0xfc8d43","Object","Array","_0x53e71f","_0x207547","_0x5c97a3","_0x6b8fed","exports","EventEmiter","require","BinanceConstant_1","WebSocket","BinanceProxy","_0x7494e7","_0x35f852","_0xd9e094","_0x1362a4","setInterval","_0x15c5e5","_0x311a6b","_0xba4a03","_0x50853c","JSON","_0x31e06f","_0x106578","clearInterval","_0x48dc51"],"mappings":"AAAA,aACA,IAAIA,SAAA,CAAa,MAAQ,K,WAAA,CAAT,EAA6B,UAAY,C,oMACrD,IAAIC,SAAA,CAAgB,SAAUC,SAAV,CAAaC,SAAb,CAAgB,CAChCF,SAAA,CAAgBG,MAAA,C,gBAAA,GACX,C,WAAE,CAAW,EAAb,YAA6BC,KAA7B,EAAsC,SAAUH,SAAV,CAAaC,SAAb,CAAgB,CAAED,SAAA,C,WAAA,EAAcC,SAAd,CAAF,CAD3C,EAEZ,SAAUD,SAAV,CAAaC,SAAb,CAAgB,CAAE,QAASG,SAAT,IAAcH,SAAd,CAAiB,GAAIA,SAAA,C,gBAAA,EAAiBG,SAAjB,CAAJ,CAAyBJ,SAAA,CAAEI,SAAF,EAAOH,SAAA,CAAEG,SAAF,CAAP,CAA5C,CAFpB,CAGA,O,mBAAOL,S,CAAcC,S,CAAGC,S,CAAxB,CAJgC,CAApC,CAMA,OAAO,SAAUI,SAAV,CAAaC,SAAb,CAAgB,CACnBP,SAAA,CAAcM,SAAd,CAAiBC,SAAjB,EACA,SAASC,SAAT,EAAc,CAAE,K,aAAA,EAAmBF,SAAnB,CAAF,CACdA,SAAA,C,WAAA,E,mBAAcC,S,CAAM,I,CAAN,CAAaJ,MAAA,C,QAAA,EAAcI,SAAd,CAAb,CAAiC,CAAAC,SAAA,C,WAAA,EAAeD,SAAA,C,WAAA,CAAf,CAA4B,IAAIC,SAAJ,EAA5B,CAA/C,CAHmB,CAAvB,CAPqD,CAAb,EAA5C,CAaAL,MAAA,C,gBAAA,EAAsBM,OAAtB,C,YAAA,CAA6C,C,OAAE,C,IAAF,CAA7C,EACA,IAAIC,WAAA,CAAcC,OAAA,C,QAAA,CAAlB,CACA,IAAIC,iBAAA,CAAoBD,OAAA,C,mBAAA,CAAxB,CACA,IAAIE,SAAA,CAAYF,OAAA,C,eAAA,CAAhB,CACA,IAAIG,YAAA,CAA8B,SAAUC,SAAV,CAAkB,C,mzDAChDhB,SAAA,CAAUiB,SAAV,CAAwBD,SAAxB,EACA,SAASC,SAAT,E,oHAKIC,SAAA,C,WAAA,E,QAAA,EAAyB,SAAUC,SAAV,CAAa,CAClCD,SAAA,C,oBAAA,E,mBAA2BE,W,CAAY,UAAY,E,CAGhDP,iBAAA,C,iBAAA,E,UAAA,C,CAHH,CAIAK,SAAA,C,SAAA,EAAgBC,SAAA,C,QAAA,E,YAAA,CAAhB,CACAD,SAAA,C,MAAA,EAAWL,iBAAA,C,iBAAA,E,WAAA,CAAX,C,kBAAA,EANkC,CAAtC,C,iBAJA,IAAIK,SAAA,CAAQF,SAAA,C,MAAA,EAAY,IAAZ,GAAqB,IAAjC,C,iBAyBAE,SAAA,C,WAAA,E,SAAA,EAA0B,SAAUG,SAAV,CAAsB,CAC5CH,SAAA,C,MAAA,EAAWL,iBAAA,C,iBAAA,E,YAAA,CAAX,CAAyDQ,SAAzD,EAD4C,CAAhD,C,iBAxBAH,SAAA,C,SAAA,EAAgBJ,SAAA,C,OAAA,CAAhB,C,iPAWAI,SAAA,C,WAAA,E,WAAA,EAA4B,SAAUI,SAAV,CAAmB,CAC3C,IAAIC,SAAA,CAAUD,SAAA,C,MAAA,CAAd,CACA,GAAIC,SAAA,C,GAAA,G,GAAJ,CAAuB,CACnB,IAAIC,SAAA,CAAMC,IAAA,C,OAAA,EAAWH,SAAA,C,MAAA,CAAX,CAAV,CACA,IAAK,IAAII,SAAA,C,GAAJ,C,mBAAWA,S,CAAIF,SAAA,C,QAAA,C,CAApB,CAAgCE,SAAA,EAAhC,CAAqC,CACjCR,SAAA,C,MAAA,EAAWL,iBAAA,C,iBAAA,E,aAAA,CAAX,CAA0DW,SAAA,CAAIE,SAAJ,E,GAAA,CAA1D,CAAoEF,SAAA,CAAIE,SAAJ,CAApE,EADiC,CAFlB,CAFoB,CAA/C,C,iBASAR,SAAA,C,WAAA,E,SAAA,EAA0B,SAAUS,SAAV,CAAsB,C,mBAC5CC,a,CAAcV,SAAA,C,oBAAA,C,CAAd,CACAA,SAAA,C,MAAA,EAAWL,iBAAA,C,iBAAA,E,YAAA,CAAX,CAAyDc,SAAzD,EAF4C,CAAhD,C,iBAlBAT,SAAA,C,WAAA,EAAkB,IAAIJ,SAAJ,CAAce,SAAd,CAAlB,C,iBADA,IAAIA,SAAA,C,mBAAMhB,iBAAA,C,iBAAA,E,cAAA,C,oBAAV,C,iBA0BA,OAAOK,SAAP,C,SAEJ,OAAOD,SAAP,CAjCgD,CAAlB,CAkChCN,WAlCgC,CAAlC,CAmCAD,OAAA,C,cAAA,EAAuBK,YAAvB","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar EventEmiter = require(\"events\");\r\nvar BinanceConstant_1 = require(\"./BinanceConstant\");\r\nvar WebSocket = require('isomorphic-ws');\r\nvar BinanceProxy = /** @class */ (function (_super) {\r\n    __extends(BinanceProxy, _super);\r\n    function BinanceProxy() {\r\n        var _this = _super.call(this) || this;\r\n        _this.wsState = WebSocket.CLOSE;\r\n        var url = BinanceConstant_1.BinanceConstant.baseEndpoint + \"/ws/!ticker@arr\";\r\n        _this.webSocket = new WebSocket(url);\r\n        _this.webSocket.onopen = function (e) {\r\n            _this._keepAliveInterval = setInterval(function () {\r\n                //TODO: Send correct pong message\r\n                //this.webSocket.send(\"pong\");\r\n            }, BinanceConstant_1.BinanceConstant.PINGTIME);\r\n            _this.wsState = e.target.readyState;\r\n            _this.emit(BinanceConstant_1.BinanceConstant.OPENEVENT, \"Connected\");\r\n        };\r\n        _this.webSocket.onmessage = function (receive) {\r\n            var msgType = receive.type;\r\n            if (msgType[0] == 'm') {\r\n                var msg = JSON.parse(receive.data);\r\n                for (var i = 0; i < msg.length; i++) {\r\n                    _this.emit(BinanceConstant_1.BinanceConstant.TICKEREVENT, msg[i].s, msg[i]);\r\n                }\r\n            }\r\n        };\r\n        _this.webSocket.onclose = function (closeEvent) {\r\n            clearInterval(_this._keepAliveInterval);\r\n            _this.emit(BinanceConstant_1.BinanceConstant.CLOSEEVENT, closeEvent);\r\n        };\r\n        _this.webSocket.onerror = function (errorEvent) {\r\n            _this.emit(BinanceConstant_1.BinanceConstant.ERROREVENT, errorEvent);\r\n        };\r\n        return _this;\r\n    }\r\n    return BinanceProxy;\r\n}(EventEmiter));\r\nexports.BinanceProxy = BinanceProxy;\r\n"]}