'use strict';var __awaiter=this&&this['__awaiter']||function(_0xc261d4,_0x54c99b,_0x4f1b36,_0x5df3c2){var _0x54f8ee={};_0x54f8ee['XXsnA']=function(_0x3f0e58,_0x34dcff){return _0x3f0e58(_0x34dcff);};_0x54f8ee['coLjk']='throw';return new(_0x4f1b36||(_0x4f1b36=Promise))(function(_0x3921fb,_0x306a1f){var _0x328250={};_0x328250['Thwaw']=function(_0x4d36f6,_0x2250d2){return _0x54f8ee.XXsnA(_0x4d36f6,_0x2250d2);};_0x328250['cTFlQ']=_0x54f8ee.coLjk;_0x328250['JtpYH']=function(_0x217ab4,_0x5ad233){return _0x217ab4(_0x5ad233);};function _0x3bff22(_0x189945){try{_0x54f8ee['XXsnA'](_0x1d365e,_0x5df3c2['next'](_0x189945));}catch(_0x345c7d){_0x54f8ee['XXsnA'](_0x306a1f,_0x345c7d);}}function _0x400495(_0xc66ce6){try{_0x328250['Thwaw'](_0x1d365e,_0x5df3c2[_0x328250['cTFlQ']](_0xc66ce6));}catch(_0x23d2dc){_0x328250['Thwaw'](_0x306a1f,_0x23d2dc);}}function _0x1d365e(_0x28d3b8){_0x28d3b8['done']?_0x54f8ee['XXsnA'](_0x3921fb,_0x28d3b8['value']):new _0x4f1b36(function(_0x3921fb){_0x328250['JtpYH'](_0x3921fb,_0x28d3b8['value']);})['then'](_0x3bff22,_0x400495);}_0x54f8ee['XXsnA'](_0x1d365e,(_0x5df3c2=_0x5df3c2['apply'](_0xc261d4,_0x54c99b||[]))['next']());});};var __generator=this&&this['__generator']||function(_0x6c39cc,_0x58bca0){var _0x1f0356={};_0x1f0356['Oodbo']=function(_0x366f78,_0x3a8467){return _0x366f78&_0x3a8467;};_0x1f0356['bVOHe']=function(_0x24aa0f,_0x31c1d5){return _0x24aa0f(_0x31c1d5);};_0x1f0356['YGGOw']='Generator\x20is\x20already\x20executing.';_0x1f0356['JuKtx']='return';_0x1f0356['BhDhg']='throw';_0x1f0356['xCeET']=function(_0x3f8af9,_0x139826){return _0x3f8af9&_0x139826;};_0x1f0356['NeVVM']=function(_0x3ebe44,_0x1d504f){return _0x3ebe44>_0x1d504f;};_0x1f0356['MSrxN']=function(_0x3c77c9,_0x11d7e7){return _0x3c77c9-_0x11d7e7;};_0x1f0356['EWAaw']=function(_0x1c0601,_0x1f520d){return _0x1c0601===_0x1f520d;};_0x1f0356['impGs']=function(_0x512017,_0x1aa295){return _0x512017===_0x1aa295;};_0x1f0356['pvqmr']=function(_0x3778a8,_0x19b85d){return _0x3778a8<_0x19b85d;};_0x1f0356['sjdcu']=function(_0xba71ac,_0xbe990a){return _0xba71ac<_0xbe990a;};_0x1f0356['wMFnF']=function(_0x118958,_0x17ffb2){return _0x118958(_0x17ffb2);};_0x1f0356['xjSXu']=function(_0x154a88,_0x254dfc){return _0x154a88(_0x254dfc);};_0x1f0356['zHwtF']='function';var _0x1f8f2e={},_0x2b99e8,_0x188523,_0x11455c,_0x234f37;_0x1f8f2e['label']=0x0;_0x1f8f2e['sent']=function(){if(_0x1f0356.Oodbo(_0x11455c[0x0],0x1))throw _0x11455c[0x1];return _0x11455c[0x1];};_0x1f8f2e['trys']=[];_0x1f8f2e['ops']=[];return _0x234f37={},_0x1f0356['impGs'](typeof Symbol,_0x1f0356['zHwtF'])&&(_0x234f37[Symbol['iterator']]=function(){return this;}),_0x234f37;_0x234f37['next']=_0x1f0356.wMFnF(_0x56286e,0x0);_0x234f37['throw']=_0x56286e(0x1);_0x234f37['return']=_0x1f0356.xjSXu(_0x56286e,0x2);function _0x56286e(_0x68c8b2){return function(_0x4dc70c){return _0x1f0356['bVOHe'](_0x531b1e,[_0x68c8b2,_0x4dc70c]);};}function _0x531b1e(_0x492ace){if(_0x2b99e8)throw new TypeError(_0x1f0356['YGGOw']);while(_0x1f8f2e)try{if(_0x2b99e8=0x1,_0x188523&&(_0x11455c=_0x1f0356['Oodbo'](_0x492ace[0x0],0x2)?_0x188523[_0x1f0356['JuKtx']]:_0x492ace[0x0]?_0x188523[_0x1f0356['BhDhg']]||((_0x11455c=_0x188523[_0x1f0356['JuKtx']])&&_0x11455c['call'](_0x188523),0x0):_0x188523['next'])&&!(_0x11455c=_0x11455c['call'](_0x188523,_0x492ace[0x1]))['done'])return _0x11455c;if(_0x188523=0x0,_0x11455c)_0x492ace=[_0x1f0356['xCeET'](_0x492ace[0x0],0x2),_0x11455c['value']];switch(_0x492ace[0x0]){case 0x0:case 0x1:_0x11455c=_0x492ace;break;case 0x4:_0x1f8f2e['label']++;return{'value':_0x492ace[0x1],'done':![]};case 0x5:_0x1f8f2e['label']++;_0x188523=_0x492ace[0x1];_0x492ace=[0x0];continue;case 0x7:_0x492ace=_0x1f8f2e['ops']['pop']();_0x1f8f2e['trys']['pop']();continue;default:if(!(_0x11455c=_0x1f8f2e['trys'],_0x11455c=_0x1f0356['NeVVM'](_0x11455c['length'],0x0)&&_0x11455c[_0x1f0356['MSrxN'](_0x11455c['length'],0x1)])&&(_0x1f0356['EWAaw'](_0x492ace[0x0],0x6)||_0x1f0356['impGs'](_0x492ace[0x0],0x2))){_0x1f8f2e=0x0;continue;}if(_0x1f0356['impGs'](_0x492ace[0x0],0x3)&&(!_0x11455c||_0x492ace[0x1]>_0x11455c[0x0]&&_0x1f0356['pvqmr'](_0x492ace[0x1],_0x11455c[0x3]))){_0x1f8f2e['label']=_0x492ace[0x1];break;}if(_0x492ace[0x0]===0x6&&_0x1f0356['sjdcu'](_0x1f8f2e['label'],_0x11455c[0x1])){_0x1f8f2e['label']=_0x11455c[0x1];_0x11455c=_0x492ace;break;}if(_0x11455c&&_0x1f8f2e['label']<_0x11455c[0x2]){_0x1f8f2e['label']=_0x11455c[0x2];_0x1f8f2e['ops']['push'](_0x492ace);break;}if(_0x11455c[0x2])_0x1f8f2e['ops']['pop']();_0x1f8f2e['trys']['pop']();continue;}_0x492ace=_0x58bca0['call'](_0x6c39cc,_0x1f8f2e);}catch(_0x5ca8eb){_0x492ace=[0x6,_0x5ca8eb];_0x188523=0x0;}finally{_0x2b99e8=_0x11455c=0x0;}if(_0x492ace[0x0]&0x5)throw _0x492ace[0x1];return{'value':_0x492ace[0x0]?_0x492ace[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]});var CoinCapConstant_1=require('./CoinCapConstant');var MdConstant_1=require('../api/MdConstant');var MsgFactory_1=require('./MsgFactory');var MdUtils_1=require('../api/MdUtils');var axios_1=require('axios');var CoinCapRestTransport=function(){var _0x4ea3c8=function(){var _0x22a461=!![];return function(_0x1210bb,_0x49bd74){var _0x11f465=_0x22a461?function(){if(_0x49bd74){var _0x398195=_0x49bd74['apply'](_0x1210bb,arguments);_0x49bd74=null;return _0x398195;}}:function(){};_0x22a461=![];return _0x11f465;};}();var _0x24f180=_0x4ea3c8(this,function(){var _0x12ce8a=function(){return'\x64\x65\x76';},_0x5bc255=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x4c4b37=function(){var _0x53559b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x53559b['\x74\x65\x73\x74'](_0x12ce8a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1b97a2=function(){var _0xc3e73b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0xc3e73b['\x74\x65\x73\x74'](_0x5bc255['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3be1bc=function(_0x1e0a7a){var _0x3f80ca=~-0x1>>0x1+0xff%0x0;if(_0x1e0a7a['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3f80ca)){_0x3d9d72(_0x1e0a7a);}};var _0x3d9d72=function(_0x528a7a){var _0x253573=~-0x4>>0x1+0xff%0x0;if(_0x528a7a['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x253573){_0x3be1bc(_0x528a7a);}};if(!_0x4c4b37()){if(!_0x1b97a2()){_0x3be1bc('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3be1bc('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3be1bc('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x24f180();var _0x35be25={};_0x35be25['cTskb']='3|1|2|5|4|0';_0x35be25['ipssM']='json';_0x35be25['xTAIa']=function(_0x4eca6c,_0x31bccd,_0x441fac){return _0x4eca6c(_0x31bccd,_0x441fac);};_0x35be25['MFeyW']=function(_0x5754cb,_0x5132de){return _0x5754cb*_0x5132de;};_0x35be25['aDCxP']=function(_0x3f0731,_0x22b4e9,_0x36b7ff,_0x4c873f,_0x314490){return _0x3f0731(_0x22b4e9,_0x36b7ff,_0x4c873f,_0x314490);};_0x35be25['kkmNt']=function(_0x5b71ca,_0x3ecea2){return _0x5b71ca<_0x3ecea2;};_0x35be25['qeQba']=function(_0x403ce,_0x27e5e4){return _0x403ce(_0x27e5e4);};_0x35be25['WQSTS']=function(_0x11fd9b,_0x4eb527,_0x28469){return _0x11fd9b(_0x4eb527,_0x28469);};function _0x4ecc25(_0x316407){var _0xaad7d8=_0x35be25['cTskb']['split']('|'),_0x3afdaa=0x0;while(!![]){switch(_0xaad7d8[_0x3afdaa++]){case'0':this['cb']=_0x316407;continue;case'1':this['pairs']=[];continue;case'2':this['_connected']=![];continue;case'3':this['subscriptions']={};continue;case'4':this['restClient']=axios_1['default']['create']({'method':'get','baseURL':'https://api.coincap.io','timeout':0x3e8,'withCredentials':![],'responseType':_0x35be25['ipssM']});continue;case'5':this['_elapsedTimeMs']=0x7d0;continue;}break;}}_0x4ecc25['prototype']['connect']=function(_0x17261c){this['init']();};_0x4ecc25['prototype']['isConnected']=function(){return this['_connected'];};_0x4ecc25['prototype']['init']=function(){var _0xf83ec4=this;this['_pullMarket']=_0x35be25['xTAIa'](setInterval,function(){return __awaiter(_0xf83ec4,void 0x0,void 0x0,function(){return __generator(this,function(_0x436deb){switch(_0x436deb['label']){case 0x0:return[0x4,this['getData']()];case 0x1:_0x436deb['sent']();return[0x4,this['sendData']()];case 0x2:_0x436deb['sent']();return[0x2];}});});},this['_elapsedTimeMs']);};_0x4ecc25['prototype']['sendData']=function(){var _0x2f530e={};_0x2f530e['wmMlM']=function(_0xfd03a8,_0x3a3a93){return _0x35be25.MFeyW(_0xfd03a8,_0x3a3a93);};_0x2f530e['jfvia']=function(_0x314de1,_0x3a0f1a){return _0x314de1%_0x3a0f1a;};_0x2f530e['QcqcE']=function(_0x1d5a1e,_0x5abbeb,_0x180445){return _0x35be25.xTAIa(_0x1d5a1e,_0x5abbeb,_0x180445);};return _0x35be25['aDCxP'](__awaiter,this,void 0x0,void 0x0,function(){var _0x4ad61a=this;return _0x2f530e['QcqcE'](__generator,this,function(_0x26bc96){var _0x551315={};_0x551315['FfpKf']=function(_0x50b9fa,_0x21e149){return _0x2f530e.wmMlM(_0x50b9fa,_0x21e149);};_0x551315['MrWHQ']=function(_0x9c8961,_0x7ac0e7){return _0x2f530e.jfvia(_0x9c8961,_0x7ac0e7);};switch(_0x26bc96['label']){case 0x0:return[0x4,this['pairs']['forEach'](function(_0x130d11){var _0x25dfaf='4|1|0|3|2'['split']('|'),_0x52402c=0x0;while(!![]){switch(_0x25dfaf[_0x52402c++]){case'0':var _0x236f9d=_0x4ad61a['subscriptions'][_0x130d11]['volumeUsd24Hr'];continue;case'1':var _0x4d4ac5=_0x4ad61a['subscriptions'][_0x130d11]['priceQuote'];continue;case'2':_0x4ad61a['cb']['on'](_0xc5c0d1);continue;case'3':_0xc5c0d1['buffer'](MdUtils_1['MdUtils']['getMsSinceMidnight'](),MdConstant_1['MdConstant']['COINSID'][_0x4ad61a['subscriptions'][_0x130d11]['baseSymbol']],Math['trunc'](_0x4d4ac5),Math['trunc'](_0x4d4ac5%0x1*0x989680),0x0,0x0,Math['trunc'](_0x236f9d),Math['trunc'](_0x551315['FfpKf'](_0x551315['MrWHQ'](_0x236f9d,0x1),0x989680)),MdConstant_1['MdConstant']['CoinCapTransport'],MdConstant_1['MdConstant']['COINSID'][_0x4ad61a['subscriptions'][_0x130d11]['quoteSymbol']]);continue;case'4':var _0xc5c0d1=MsgFactory_1['MsgFactory']['priceMsg'];continue;}break;}})];case 0x1:_0x26bc96['sent']();return[0x2];}});});};_0x4ecc25['prototype']['getData']=function(){var _0x2ef9cb={};_0x2ef9cb['pfPWE']=function(_0x39a101,_0x92c350){return _0x35be25.kkmNt(_0x39a101,_0x92c350);};_0x2ef9cb['lBxyy']=function(_0x4ec963,_0x58a29e){return _0x35be25.qeQba(_0x4ec963,_0x58a29e);};_0x2ef9cb['CMJCK']=function(_0x2d98dd,_0xf8ecc1){return _0x2d98dd!=_0xf8ecc1;};_0x2ef9cb['IgbiC']=function(_0x22e738,_0x3f136){return _0x22e738==_0x3f136;};_0x2ef9cb['cxcjR']=function(_0x29158c,_0x53a7e6,_0xa5f319){return _0x35be25.xTAIa(_0x29158c,_0x53a7e6,_0xa5f319);};_0x2ef9cb['Ecxlr']=function(_0xc62e2a,_0x57adcb,_0x325cd1){return _0x35be25.WQSTS(_0xc62e2a,_0x57adcb,_0x325cd1);};return __awaiter(this,void 0x0,void 0x0,function(){var _0xd3950d={};_0xd3950d['KzQpi']=function(_0x3e092b,_0x41b9be){return _0x2ef9cb.pfPWE(_0x3e092b,_0x41b9be);};_0xd3950d['ztkmu']=function(_0x1ae75e,_0x2399e6){return _0x2ef9cb.CMJCK(_0x1ae75e,_0x2399e6);};_0xd3950d['yWFpU']=function(_0x35d762,_0x280279){return _0x2ef9cb.IgbiC(_0x35d762,_0x280279);};_0xd3950d['YWjDD']=function(_0x3e3ab8,_0x149f04){return _0x3e3ab8+_0x149f04;};_0xd3950d['Bsmwx']=function(_0xd1d227,_0x40f668,_0x44843e){return _0x2ef9cb.cxcjR(_0xd1d227,_0x40f668,_0x44843e);};var _0x4fe150,_0x384bda,_0x45f501;var _0x113b20=this;return _0x2ef9cb['Ecxlr'](__generator,this,function(_0x528e02){var _0xd1aaf2={};_0xd1aaf2['TOUdQ']='/v2/markets';switch(_0x528e02['label']){case 0x0:_0x4fe150=function(_0x45f501){var _0x250e10={};_0x250e10['RZvwr']=function(_0x433c86,_0x26f3b3){return _0xd3950d.KzQpi(_0x433c86,_0x26f3b3);};_0x250e10['SJujy']=function(_0xaa7846,_0x4e2a06){return _0xaa7846>_0x4e2a06;};_0x250e10['jgbIa']=function(_0x19fd0c,_0x545549){return _0xd3950d.ztkmu(_0x19fd0c,_0x545549);};_0x250e10['UIQUu']='4|3|0|5|2|1';_0x250e10['PQkyr']=function(_0x5b1cdf,_0x2bd428){return _0xd3950d.yWFpU(_0x5b1cdf,_0x2bd428);};_0x250e10['JbOWI']=function(_0x3afd1a,_0x181c84){return _0xd3950d.KzQpi(_0x3afd1a,_0x181c84);};_0x250e10['FoApS']=function(_0x49efef,_0x4fc1b6){return _0xd3950d.YWjDD(_0x49efef,_0x4fc1b6);};var _0x4433d3,_0x5c0f96;return _0xd3950d['Bsmwx'](__generator,this,function(_0x528e02){switch(_0x528e02['label']){case 0x0:_0x4433d3={};return[0x4,_0x384bda['restClient']['get'](_0xd1aaf2['TOUdQ'],{'params':{'baseSymbol':CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE'][_0x45f501]}})];case 0x1:_0x5c0f96=_0x528e02['sent']();if(!_0x5c0f96['data'])return[0x3,0x3];return[0x4,_0x5c0f96['data']['data']['forEach'](function(_0x1e5eec){var _0x49e24a={};_0x49e24a['XYNRZ']=function(_0x57d8b4,_0x350e0a){return _0x250e10.RZvwr(_0x57d8b4,_0x350e0a);};_0x49e24a['jUwuy']=function(_0x701b03,_0x708af9){return _0x250e10.SJujy(_0x701b03,_0x708af9);};if(_0x250e10['jgbIa'](MdConstant_1['MdConstant']['COINSID'][_0x1e5eec['quoteSymbol']],undefined)){var _0x2704d1=_0x250e10['UIQUu']['split']('|'),_0x5e6ca6=0x0;while(!![]){switch(_0x2704d1[_0x5e6ca6++]){case'0':if(_0x250e10['PQkyr'](_0x4433d3[_0x57b881],undefined)){_0x4433d3[_0x57b881]=[];}continue;case'1':_0x113b20['subscriptions'][_0x57b881]={};_0x113b20['subscriptions'][_0x57b881]['symbol']=_0x1e5eec.baseSymbol;_0x113b20['subscriptions'][_0x57b881]['symbolId']=MdConstant_1.MdConstant.COINSID[_0x1e5eec.baseSymbol];_0x113b20['subscriptions'][_0x57b881]['benchmark']=MdConstant_1.MdConstant.COINSID[_0x1e5eec.quoteSymbol];_0x113b20['subscriptions'][_0x57b881]['price']=_0x4433d3[_0x57b881][0x0].priceQuote;_0x113b20['subscriptions'][_0x57b881]['volume']=_0x4433d3[_0x57b881][0x0].volumeUsd24Hr;continue;case'2':_0x4433d3[_0x57b881]['sort'](function(_0x1f2ded,_0x2d9427){if(_0x49e24a['XYNRZ'](_0x1f2ded['priceQuote'],_0x2d9427['priceQuote']))return-0x1;if(_0x49e24a['jUwuy'](_0x1f2ded['priceQuote'],_0x2d9427['priceQuote']))return 0x1;return 0x0;});continue;case'3':if(_0x250e10['JbOWI'](_0x113b20['pairs']['indexOf'](_0x57b881),0x0))_0x113b20['pairs']['push'](_0x57b881);continue;case'4':var _0x57b881=_0x250e10['FoApS'](_0x250e10['FoApS'](_0x1e5eec['quoteSymbol'],'-'),_0x1e5eec['baseSymbol']);continue;case'5':_0x4433d3[_0x57b881]['push'](_0x1e5eec);continue;}break;}}})];case 0x2:_0x528e02['sent']();_0x528e02['label']=0x3;case 0x3:return[0x2];}});};_0x384bda=this;_0x45f501=0x0;_0x528e02['label']=0x1;case 0x1:if(!_0x2ef9cb['pfPWE'](_0x45f501,CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE']['length']))return[0x3,0x4];return[0x5,_0x2ef9cb['lBxyy'](_0x4fe150,_0x45f501)];case 0x2:_0x528e02['sent']();_0x528e02['label']=0x3;case 0x3:_0x45f501++;return[0x3,0x1];case 0x4:return[0x2];}});});};return _0x4ecc25;}();exports['CoinCapRestTransport']=CoinCapRestTransport;
//# sourceMappingURL=CoinCapRestTransport.js.map