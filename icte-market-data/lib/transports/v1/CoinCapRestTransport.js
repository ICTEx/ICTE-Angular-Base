'use strict';var __awaiter=this&&this['__awaiter']||function(_0x44ac60,_0x47826b,_0x11cb03,_0xe42dde){var _0x40da04={};_0x40da04['AVGQC']=function(_0x373230,_0x4dcfd9){return _0x373230(_0x4dcfd9);};_0x40da04['hAmOp']='throw';_0x40da04['cmpoN']=function(_0x17d028,_0x43827d){return _0x17d028(_0x43827d);};return new(_0x11cb03||(_0x11cb03=Promise))(function(_0x5e6ca4,_0x4dbe2a){var _0x435898={};_0x435898['nJSHz']=_0x40da04.hAmOp;_0x435898['uVrfq']=function(_0xdb2284,_0x265e9f){return _0x40da04.cmpoN(_0xdb2284,_0x265e9f);};function _0x2068be(_0x282eea){try{_0x40da04['AVGQC'](_0x1e9e78,_0xe42dde['next'](_0x282eea));}catch(_0x57b0fc){_0x4dbe2a(_0x57b0fc);}}function _0x115cae(_0x82edcc){try{_0x1e9e78(_0xe42dde[_0x435898['nJSHz']](_0x82edcc));}catch(_0x2ededa){_0x4dbe2a(_0x2ededa);}}function _0x1e9e78(_0x12cba3){_0x12cba3['done']?_0x40da04['AVGQC'](_0x5e6ca4,_0x12cba3['value']):new _0x11cb03(function(_0x5e6ca4){_0x435898['uVrfq'](_0x5e6ca4,_0x12cba3['value']);})['then'](_0x2068be,_0x115cae);}_0x1e9e78((_0xe42dde=_0xe42dde['apply'](_0x44ac60,_0x47826b||[]))['next']());});};var __generator=this&&this['__generator']||function(_0xf29dec,_0x166ef9){var _0x3c322c={};_0x3c322c['ZIZxy']=function(_0x5accae,_0x565216){return _0x5accae&_0x565216;};_0x3c322c['UqjZm']=function(_0xca3799,_0xcd83a5){return _0xca3799(_0xcd83a5);};_0x3c322c['IJxIs']='Generator\x20is\x20already\x20executing.';_0x3c322c['lbnux']='throw';_0x3c322c['vAMtJ']=function(_0x57f3d7,_0x2eb03b){return _0x57f3d7&_0x2eb03b;};_0x3c322c['JQqlS']=function(_0x154f94,_0x5a2fc1){return _0x154f94>_0x5a2fc1;};_0x3c322c['ZlnWR']=function(_0x421ba0,_0x577593){return _0x421ba0===_0x577593;};_0x3c322c['msrXj']=function(_0x4b46c1,_0x389dbd){return _0x4b46c1===_0x389dbd;};_0x3c322c['thlOg']=function(_0x2f3efb,_0x1083b9){return _0x2f3efb<_0x1083b9;};_0x3c322c['GErlu']=function(_0x4547d5,_0x716c2a){return _0x4547d5===_0x716c2a;};_0x3c322c['VzrUy']=function(_0x2b1f5d,_0x682052){return _0x2b1f5d(_0x682052);};_0x3c322c['hCyES']=function(_0x3a39ad,_0x5a8fe6){return _0x3a39ad===_0x5a8fe6;};_0x3c322c['VSotY']='function';var _0x7ec4a6={},_0x1bc91f,_0x478114,_0x3cdabb,_0x4c7cf3;_0x7ec4a6['label']=0x0;_0x7ec4a6['sent']=function(){if(_0x3c322c.ZIZxy(_0x3cdabb[0x0],0x1))throw _0x3cdabb[0x1];return _0x3cdabb[0x1];};_0x7ec4a6['trys']=[];_0x7ec4a6['ops']=[];return _0x4c7cf3={},_0x3c322c['hCyES'](typeof Symbol,_0x3c322c['VSotY'])&&(_0x4c7cf3[Symbol['iterator']]=function(){return this;}),_0x4c7cf3;_0x4c7cf3['next']=_0x3c322c.UqjZm(_0x24027a,0x0);_0x4c7cf3['throw']=_0x24027a(0x1);_0x4c7cf3['return']=_0x3c322c.VzrUy(_0x24027a,0x2);function _0x24027a(_0x2543d4){return function(_0x37265c){return _0x3c322c['UqjZm'](_0x54530f,[_0x2543d4,_0x37265c]);};}function _0x54530f(_0xc80501){if(_0x1bc91f)throw new TypeError(_0x3c322c['IJxIs']);while(_0x7ec4a6)try{if(_0x1bc91f=0x1,_0x478114&&(_0x3cdabb=_0xc80501[0x0]&0x2?_0x478114['return']:_0xc80501[0x0]?_0x478114[_0x3c322c['lbnux']]||((_0x3cdabb=_0x478114['return'])&&_0x3cdabb['call'](_0x478114),0x0):_0x478114['next'])&&!(_0x3cdabb=_0x3cdabb['call'](_0x478114,_0xc80501[0x1]))['done'])return _0x3cdabb;if(_0x478114=0x0,_0x3cdabb)_0xc80501=[_0x3c322c['vAMtJ'](_0xc80501[0x0],0x2),_0x3cdabb['value']];switch(_0xc80501[0x0]){case 0x0:case 0x1:_0x3cdabb=_0xc80501;break;case 0x4:_0x7ec4a6['label']++;return{'value':_0xc80501[0x1],'done':![]};case 0x5:_0x7ec4a6['label']++;_0x478114=_0xc80501[0x1];_0xc80501=[0x0];continue;case 0x7:_0xc80501=_0x7ec4a6['ops']['pop']();_0x7ec4a6['trys']['pop']();continue;default:if(!(_0x3cdabb=_0x7ec4a6['trys'],_0x3cdabb=_0x3c322c['JQqlS'](_0x3cdabb['length'],0x0)&&_0x3cdabb[_0x3cdabb['length']-0x1])&&(_0x3c322c['ZlnWR'](_0xc80501[0x0],0x6)||_0x3c322c['msrXj'](_0xc80501[0x0],0x2))){_0x7ec4a6=0x0;continue;}if(_0xc80501[0x0]===0x3&&(!_0x3cdabb||_0x3c322c['JQqlS'](_0xc80501[0x1],_0x3cdabb[0x0])&&_0x3c322c['thlOg'](_0xc80501[0x1],_0x3cdabb[0x3]))){_0x7ec4a6['label']=_0xc80501[0x1];break;}if(_0x3c322c['GErlu'](_0xc80501[0x0],0x6)&&_0x7ec4a6['label']<_0x3cdabb[0x1]){_0x7ec4a6['label']=_0x3cdabb[0x1];_0x3cdabb=_0xc80501;break;}if(_0x3cdabb&&_0x3c322c['thlOg'](_0x7ec4a6['label'],_0x3cdabb[0x2])){_0x7ec4a6['label']=_0x3cdabb[0x2];_0x7ec4a6['ops']['push'](_0xc80501);break;}if(_0x3cdabb[0x2])_0x7ec4a6['ops']['pop']();_0x7ec4a6['trys']['pop']();continue;}_0xc80501=_0x166ef9['call'](_0xf29dec,_0x7ec4a6);}catch(_0x576818){_0xc80501=[0x6,_0x576818];_0x478114=0x0;}finally{_0x1bc91f=_0x3cdabb=0x0;}if(_0x3c322c['vAMtJ'](_0xc80501[0x0],0x5))throw _0xc80501[0x1];return{'value':_0xc80501[0x0]?_0xc80501[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]});var CoinCapConstant_1=require('./CoinCapConstant');var MdConstant_1=require('../api/MdConstant');var MsgFactory_1=require('./MsgFactory');var MdUtils_1=require('../api/MdUtils');var axios_1=require('axios');var CoinCapRestTransport=function(){var _0x3bfdf7={};_0x3bfdf7['QcIly']='get';_0x3bfdf7['RXFwo']=function(_0x38c83c,_0x1b3d65,_0x1f6ea7,_0x59958f,_0x2f630d){return _0x38c83c(_0x1b3d65,_0x1f6ea7,_0x59958f,_0x2f630d);};_0x3bfdf7['TpTzj']=function(_0x443a4b,_0x23e02f,_0x1dbc1e){return _0x443a4b(_0x23e02f,_0x1dbc1e);};_0x3bfdf7['Dtrdv']=function(_0x194c34,_0x2de223,_0x3f2906){return _0x194c34(_0x2de223,_0x3f2906);};_0x3bfdf7['mkWRl']='3|4|1|0|2';_0x3bfdf7['WNuaD']=function(_0x285d7d,_0x4f937e){return _0x285d7d%_0x4f937e;};_0x3bfdf7['wGuEU']=function(_0x13e729,_0x15c012){return _0x13e729==_0x15c012;};_0x3bfdf7['fyFNK']='/v2/markets';_0x3bfdf7['sTgad']=function(_0x4bbf76,_0x3b4c38){return _0x4bbf76<_0x3b4c38;};_0x3bfdf7['TlXMk']=function(_0x478a29,_0x66639c){return _0x478a29(_0x66639c);};function _0x4e1e25(_0x40a1d2){var _0x35e9c9='4|2|5|0|3|1'['split']('|'),_0x299c6e=0x0;while(!![]){switch(_0x35e9c9[_0x299c6e++]){case'0':this['_elapsedTimeMs']=0x7d0;continue;case'1':this['cb']=_0x40a1d2;continue;case'2':this['pairs']=[];continue;case'3':this['restClient']=axios_1['default']['create']({'method':_0x3bfdf7['QcIly'],'baseURL':'https://api.coincap.io','timeout':0x3e8,'withCredentials':![],'responseType':'json'});continue;case'4':this['subscriptions']={};continue;case'5':this['_connected']=![];continue;}break;}}_0x4e1e25['prototype']['connect']=function(_0x578e10){this['init']();};_0x4e1e25['prototype']['isConnected']=function(){return this['_connected'];};_0x4e1e25['prototype']['init']=function(){var _0x1a9b12={};_0x1a9b12['RtOur']=function(_0x571b4c,_0x394aaa,_0x33f84d,_0x152e22,_0x5b6584){return _0x3bfdf7.RXFwo(_0x571b4c,_0x394aaa,_0x33f84d,_0x152e22,_0x5b6584);};var _0x12de5d=this;this['_pullMarket']=_0x3bfdf7['TpTzj'](setInterval,function(){return _0x1a9b12['RtOur'](__awaiter,_0x12de5d,void 0x0,void 0x0,function(){return __generator(this,function(_0x2b1dac){switch(_0x2b1dac['label']){case 0x0:return[0x4,this['getData']()];case 0x1:_0x2b1dac['sent']();return[0x4,this['sendData']()];case 0x2:_0x2b1dac['sent']();return[0x2];}});});},this['_elapsedTimeMs']);};_0x4e1e25['prototype']['sendData']=function(){var _0x45a88b={};_0x45a88b['nDAhp']=_0x3bfdf7.mkWRl;_0x45a88b['DmEXw']=function(_0x67e4cb,_0x24cf3f){return _0x3bfdf7.WNuaD(_0x67e4cb,_0x24cf3f);};return _0x3bfdf7['RXFwo'](__awaiter,this,void 0x0,void 0x0,function(){var _0xccfd20=this;return _0x3bfdf7['Dtrdv'](__generator,this,function(_0x54a11a){var _0x47f3a1={};_0x47f3a1['Mlilz']=_0x45a88b.nDAhp;_0x47f3a1['onTRd']=function(_0x272257,_0x608fe){return _0x272257*_0x608fe;};_0x47f3a1['Gqaxy']=function(_0x50b782,_0x5973c6){return _0x45a88b.DmEXw(_0x50b782,_0x5973c6);};_0x47f3a1['wCEBd']=function(_0x1443a5,_0x2e5b01){return _0x1443a5%_0x2e5b01;};switch(_0x54a11a['label']){case 0x0:return[0x4,this['pairs']['forEach'](function(_0x86ad8a){var _0x51dca5=_0x47f3a1['Mlilz']['split']('|'),_0x5ac1b8=0x0;while(!![]){switch(_0x51dca5[_0x5ac1b8++]){case'0':_0x2db974['buffer'](MdUtils_1['MdUtils']['getMsSinceMidnight'](),_0xccfd20['subscriptions'][_0x86ad8a]['symbolId'],Math['trunc'](_0x495546),Math['trunc'](_0x47f3a1['onTRd'](_0x47f3a1['Gqaxy'](_0x495546,0x1),CoinCapConstant_1['CoinCapConstant']['DIV'])),0x0,0x0,Math['trunc'](_0x4819c1),Math['trunc'](_0x47f3a1['wCEBd'](_0x4819c1,0x1)*CoinCapConstant_1['CoinCapConstant']['DIV']),MdConstant_1['MdConstant']['CoinCapTransport'],_0xccfd20['subscriptions'][_0x86ad8a]['benchmark']);continue;case'1':var _0x4819c1=_0xccfd20['subscriptions'][_0x86ad8a]['volume'];continue;case'2':_0xccfd20['cb']['on'](_0x2db974);continue;case'3':var _0x2db974=MsgFactory_1['MsgFactory']['priceMsg'];continue;case'4':var _0x495546=_0xccfd20['subscriptions'][_0x86ad8a]['price'];continue;}break;}})];case 0x1:_0x54a11a['sent']();return[0x2];}});});};_0x4e1e25['prototype']['getData']=function(){var _0x44ed14={};_0x44ed14['Kbgpl']=function(_0x41ee35,_0x1c6aea){return _0x41ee35*_0x1c6aea;};_0x44ed14['eqqEe']=function(_0x441419,_0x22d53c){return _0x3bfdf7.wGuEU(_0x441419,_0x22d53c);};_0x44ed14['mifzX']=function(_0x15cc27,_0x205d67){return _0x15cc27+_0x205d67;};_0x44ed14['zpRng']=_0x3bfdf7.fyFNK;_0x44ed14['thftz']=function(_0x565e6f,_0x4e6cb1){return _0x3bfdf7.sTgad(_0x565e6f,_0x4e6cb1);};_0x44ed14['aDCZP']=function(_0x22ceb2,_0x3fbb63){return _0x3bfdf7.TlXMk(_0x22ceb2,_0x3fbb63);};_0x44ed14['SGpKX']=function(_0x474ba6,_0x1c9688,_0x9442fb){return _0x474ba6(_0x1c9688,_0x9442fb);};return __awaiter(this,void 0x0,void 0x0,function(){var _0x55c6f7,_0x2bfab4,_0x2c0008;var _0x41c420=this;return _0x44ed14['SGpKX'](__generator,this,function(_0x3afdf6){var _0x4ba6f6={};_0x4ba6f6['bnIKX']=function(_0x241ba4,_0x4df0a5){return _0x241ba4>_0x4df0a5;};_0x4ba6f6['RvoNp']=function(_0x441232,_0xf2bef){return _0x441232/_0xf2bef;};_0x4ba6f6['aHkhn']=function(_0x45cc56,_0x43e58e){return _0x44ed14.Kbgpl(_0x45cc56,_0x43e58e);};_0x4ba6f6['GWFli']=function(_0xfb61e0,_0x3ae5c6){return _0xfb61e0/_0x3ae5c6;};_0x4ba6f6['TSiXr']=function(_0x449c6a,_0x1d664b){return _0x449c6a<_0x1d664b;};_0x4ba6f6['TYBvq']=function(_0x55d6df,_0x37843a){return _0x44ed14.eqqEe(_0x55d6df,_0x37843a);};_0x4ba6f6['wymYG']=function(_0x1d648d,_0x219bbe){return _0x44ed14.mifzX(_0x1d648d,_0x219bbe);};_0x4ba6f6['Oeedh']=_0x44ed14.zpRng;switch(_0x3afdf6['label']){case 0x0:_0x55c6f7=function(_0x2c0008){var _0x2a8902={};_0x2a8902['gGNBI']=function(_0x1bb838,_0x13eb2b){return _0x4ba6f6.bnIKX(_0x1bb838,_0x13eb2b);};_0x2a8902['sLwlV']=function(_0x279e5a,_0x5c67f5){return _0x4ba6f6.RvoNp(_0x279e5a,_0x5c67f5);};_0x2a8902['VfQAL']=function(_0x4f9d08,_0x1ee9a4){return _0x4ba6f6.aHkhn(_0x4f9d08,_0x1ee9a4);};_0x2a8902['TMeTQ']=function(_0x2436e6,_0x1aacfe){return _0x4ba6f6.GWFli(_0x2436e6,_0x1aacfe);};_0x2a8902['OZCpy']=function(_0x3b96bb,_0x26f91d){return _0x4ba6f6.TSiXr(_0x3b96bb,_0x26f91d);};_0x2a8902['eFOsw']=function(_0x54dcd5,_0x4ea5af){return _0x4ba6f6.TYBvq(_0x54dcd5,_0x4ea5af);};_0x2a8902['tLBkF']=function(_0x343af2,_0x783f80){return _0x343af2+_0x783f80;};_0x2a8902['caQjn']=function(_0xd2378e,_0xe24d75){return _0x4ba6f6.wymYG(_0xd2378e,_0xe24d75);};_0x2a8902['IeETP']=_0x4ba6f6.Oeedh;var _0x5713c5,_0x503712;return __generator(this,function(_0x3afdf6){var _0x32b2b0={};_0x32b2b0['YRgEs']=function(_0x1cf385,_0x17205c){return _0x1cf385<_0x17205c;};_0x32b2b0['uNGEA']=function(_0x5302ec,_0x27b980){return _0x2a8902.gGNBI(_0x5302ec,_0x27b980);};_0x32b2b0['lqmtz']=function(_0x38f6c6,_0x7a089d){return _0x2a8902.sLwlV(_0x38f6c6,_0x7a089d);};_0x32b2b0['Endbu']=function(_0x27f45e,_0xad9b25){return _0x2a8902.VfQAL(_0x27f45e,_0xad9b25);};_0x32b2b0['oNrRU']=function(_0x73257,_0x4274fd){return _0x2a8902.TMeTQ(_0x73257,_0x4274fd);};_0x32b2b0['lDqle']=function(_0x1dc654,_0x284b99){return _0x2a8902.OZCpy(_0x1dc654,_0x284b99);};_0x32b2b0['eqegw']=function(_0x2f12e5,_0x1a4b82){return _0x2a8902.eFOsw(_0x2f12e5,_0x1a4b82);};_0x32b2b0['sjgWT']=function(_0x59c6cf,_0x5a1418){return _0x2a8902.tLBkF(_0x59c6cf,_0x5a1418);};_0x32b2b0['fsYIa']=function(_0x18df2f,_0x24622f){return _0x2a8902.caQjn(_0x18df2f,_0x24622f);};switch(_0x3afdf6['label']){case 0x0:_0x5713c5={};return[0x4,_0x2bfab4['restClient']['get'](_0x2a8902['IeETP'],{'params':{'baseSymbol':CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE'][_0x2c0008]}})];case 0x1:_0x503712=_0x3afdf6['sent']();if(!_0x503712['data'])return[0x3,0x3];return[0x4,_0x503712['data']['data']['forEach'](function(_0x1417a2){if(MdConstant_1['MdConstant']['COINSID'][_0x1417a2['quoteSymbol']]!=undefined){var _0x1f6e4c='5|2|4|1|3|0'['split']('|'),_0x3e42be=0x0;while(!![]){switch(_0x1f6e4c[_0x3e42be++]){case'0':_0x41c420['subscriptions'][_0x18adb6]={};_0x41c420['subscriptions'][_0x18adb6]['symbol']=_0x1417a2.baseSymbol;_0x41c420['subscriptions'][_0x18adb6]['symbolId']=MdConstant_1.MdConstant.COINSID[_0x1417a2.baseSymbol];_0x41c420['subscriptions'][_0x18adb6]['benchmark']=MdConstant_1.MdConstant.COINSID[_0x1417a2.quoteSymbol];_0x41c420['subscriptions'][_0x18adb6]['price']=_0x32b2b0.lqmtz(Math.trunc(_0x32b2b0.Endbu(_0x5713c5[_0x18adb6][0x0].priceQuote,CoinCapConstant_1.CoinCapConstant.DIV)),CoinCapConstant_1.CoinCapConstant.DIV);_0x41c420['subscriptions'][_0x18adb6]['volume']=_0x32b2b0.oNrRU(Math.trunc(_0x32b2b0.Endbu(_0x5713c5[_0x18adb6][0x0].volumeUsd24Hr,CoinCapConstant_1.CoinCapConstant.DIV)),CoinCapConstant_1.CoinCapConstant.DIV);continue;case'1':_0x5713c5[_0x18adb6]['push'](_0x1417a2);continue;case'2':if(_0x32b2b0['lDqle'](_0x41c420['pairs']['indexOf'](_0x18adb6),0x0))_0x41c420['pairs']['push'](_0x18adb6);continue;case'3':_0x5713c5[_0x18adb6]['sort'](function(_0x136f95,_0x9f88a){if(_0x32b2b0['YRgEs'](_0x136f95['priceQuote'],_0x9f88a['priceQuote']))return-0x1;if(_0x32b2b0['uNGEA'](_0x136f95['priceQuote'],_0x9f88a['priceQuote']))return 0x1;return 0x0;});continue;case'4':if(_0x32b2b0['eqegw'](_0x5713c5[_0x18adb6],undefined)){_0x5713c5[_0x18adb6]=[];}continue;case'5':var _0x18adb6=_0x32b2b0['sjgWT'](_0x32b2b0['fsYIa'](_0x1417a2['quoteSymbol'],'-'),_0x1417a2['baseSymbol']);continue;}break;}}})];case 0x2:_0x3afdf6['sent']();_0x3afdf6['label']=0x3;case 0x3:return[0x2];}});};_0x2bfab4=this;_0x2c0008=0x0;_0x3afdf6['label']=0x1;case 0x1:if(!_0x44ed14['thftz'](_0x2c0008,CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE']['length']))return[0x3,0x4];return[0x5,_0x44ed14['aDCZP'](_0x55c6f7,_0x2c0008)];case 0x2:_0x3afdf6['sent']();_0x3afdf6['label']=0x3;case 0x3:_0x2c0008++;return[0x3,0x1];case 0x4:return[0x2];}});});};return _0x4e1e25;}();exports['CoinCapRestTransport']=CoinCapRestTransport;