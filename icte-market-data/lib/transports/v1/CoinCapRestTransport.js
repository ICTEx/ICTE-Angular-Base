'use strict';var __awaiter=this&&this['__awaiter']||function(_0xe29399,_0x101acf,_0x528497,_0x148a70){var _0x1cabc8={};_0x1cabc8['RIvWG']=function(_0x4e8265,_0x260461){return _0x4e8265(_0x260461);};_0x1cabc8['xfCbr']='throw';_0x1cabc8['zlTDr']=function(_0x129aad,_0x345011){return _0x129aad(_0x345011);};_0x1cabc8['pdJsH']=function(_0x48137b,_0x1638fb){return _0x48137b(_0x1638fb);};return new(_0x528497||(_0x528497=Promise))(function(_0x4d149d,_0x382d05){var _0x1af55d={};_0x1af55d['LMZgs']=function(_0x2c84ef,_0x8fd999){return _0x1cabc8.zlTDr(_0x2c84ef,_0x8fd999);};_0x1af55d['liGrU']=function(_0x11f94b,_0x4132fc){return _0x1cabc8.pdJsH(_0x11f94b,_0x4132fc);};function _0x120f69(_0x26a88b){try{_0x1cabc8['RIvWG'](_0x45ecb6,_0x148a70['next'](_0x26a88b));}catch(_0x411bb9){_0x382d05(_0x411bb9);}}function _0x5d04c(_0x2dcd20){try{_0x1cabc8['RIvWG'](_0x45ecb6,_0x148a70[_0x1cabc8['xfCbr']](_0x2dcd20));}catch(_0x3c0b37){_0x1cabc8['zlTDr'](_0x382d05,_0x3c0b37);}}function _0x45ecb6(_0x2df970){_0x2df970['done']?_0x1af55d['liGrU'](_0x4d149d,_0x2df970['value']):new _0x528497(function(_0x4d149d){_0x1af55d['LMZgs'](_0x4d149d,_0x2df970['value']);})['then'](_0x120f69,_0x5d04c);}_0x1cabc8['pdJsH'](_0x45ecb6,(_0x148a70=_0x148a70['apply'](_0xe29399,_0x101acf||[]))['next']());});};var __generator=this&&this['__generator']||function(_0x28084d,_0x12a6bd){var _0x2f081f={};_0x2f081f['wNPbu']=function(_0x49473e,_0x341421){return _0x49473e(_0x341421);};_0x2f081f['aPaaR']='Generator\x20is\x20already\x20executing.';_0x2f081f['zmFVw']=function(_0x57316c,_0x1f0814){return _0x57316c&_0x1f0814;};_0x2f081f['BFRvt']='throw';_0x2f081f['njBTM']='return';_0x2f081f['pFDfJ']=function(_0x4f29bd,_0x12409f){return _0x4f29bd&_0x12409f;};_0x2f081f['MmfaP']=function(_0x24e6ed,_0x12b082){return _0x24e6ed>_0x12b082;};_0x2f081f['YRpGg']=function(_0x325314,_0x3914d6){return _0x325314-_0x3914d6;};_0x2f081f['OvboC']=function(_0x4c7b62,_0x10db72){return _0x4c7b62===_0x10db72;};_0x2f081f['nOAqr']=function(_0x3eaca1,_0x5b0cab){return _0x3eaca1===_0x5b0cab;};_0x2f081f['FeNcl']=function(_0x47ff72,_0x553830){return _0x47ff72<_0x553830;};_0x2f081f['qqBio']=function(_0xe33e87,_0x12536a){return _0xe33e87<_0x12536a;};_0x2f081f['kRcOh']=function(_0x60c5ab,_0x595ca0){return _0x60c5ab<_0x595ca0;};_0x2f081f['cgPZq']=function(_0x4dfbf8,_0x3e5330){return _0x4dfbf8===_0x3e5330;};_0x2f081f['AoCUw']='function';var _0x4cfac7={},_0x2804a4,_0x310ce0,_0x56f39b,_0x1f179e;_0x4cfac7['label']=0x0;_0x4cfac7['sent']=function(){if(_0x56f39b[0x0]&0x1)throw _0x56f39b[0x1];return _0x56f39b[0x1];};_0x4cfac7['trys']=[];_0x4cfac7['ops']=[];return _0x1f179e={},_0x2f081f['cgPZq'](typeof Symbol,_0x2f081f['AoCUw'])&&(_0x1f179e[Symbol['iterator']]=function(){return this;}),_0x1f179e;_0x1f179e['next']=_0x2f081f.wNPbu(_0x10cf64,0x0);_0x1f179e['throw']=_0x2f081f.wNPbu(_0x10cf64,0x1);_0x1f179e['return']=_0x2f081f.wNPbu(_0x10cf64,0x2);function _0x10cf64(_0x5e1bae){return function(_0x332590){return _0x2f081f['wNPbu'](_0x323d3e,[_0x5e1bae,_0x332590]);};}function _0x323d3e(_0xa9ba0e){if(_0x2804a4)throw new TypeError(_0x2f081f['aPaaR']);while(_0x4cfac7)try{if(_0x2804a4=0x1,_0x310ce0&&(_0x56f39b=_0x2f081f['zmFVw'](_0xa9ba0e[0x0],0x2)?_0x310ce0['return']:_0xa9ba0e[0x0]?_0x310ce0[_0x2f081f['BFRvt']]||((_0x56f39b=_0x310ce0[_0x2f081f['njBTM']])&&_0x56f39b['call'](_0x310ce0),0x0):_0x310ce0['next'])&&!(_0x56f39b=_0x56f39b['call'](_0x310ce0,_0xa9ba0e[0x1]))['done'])return _0x56f39b;if(_0x310ce0=0x0,_0x56f39b)_0xa9ba0e=[_0x2f081f['pFDfJ'](_0xa9ba0e[0x0],0x2),_0x56f39b['value']];switch(_0xa9ba0e[0x0]){case 0x0:case 0x1:_0x56f39b=_0xa9ba0e;break;case 0x4:_0x4cfac7['label']++;return{'value':_0xa9ba0e[0x1],'done':![]};case 0x5:_0x4cfac7['label']++;_0x310ce0=_0xa9ba0e[0x1];_0xa9ba0e=[0x0];continue;case 0x7:_0xa9ba0e=_0x4cfac7['ops']['pop']();_0x4cfac7['trys']['pop']();continue;default:if(!(_0x56f39b=_0x4cfac7['trys'],_0x56f39b=_0x2f081f['MmfaP'](_0x56f39b['length'],0x0)&&_0x56f39b[_0x2f081f['YRpGg'](_0x56f39b['length'],0x1)])&&(_0x2f081f['OvboC'](_0xa9ba0e[0x0],0x6)||_0x2f081f['OvboC'](_0xa9ba0e[0x0],0x2))){_0x4cfac7=0x0;continue;}if(_0x2f081f['nOAqr'](_0xa9ba0e[0x0],0x3)&&(!_0x56f39b||_0x2f081f['MmfaP'](_0xa9ba0e[0x1],_0x56f39b[0x0])&&_0x2f081f['FeNcl'](_0xa9ba0e[0x1],_0x56f39b[0x3]))){_0x4cfac7['label']=_0xa9ba0e[0x1];break;}if(_0x2f081f['nOAqr'](_0xa9ba0e[0x0],0x6)&&_0x2f081f['qqBio'](_0x4cfac7['label'],_0x56f39b[0x1])){_0x4cfac7['label']=_0x56f39b[0x1];_0x56f39b=_0xa9ba0e;break;}if(_0x56f39b&&_0x2f081f['kRcOh'](_0x4cfac7['label'],_0x56f39b[0x2])){_0x4cfac7['label']=_0x56f39b[0x2];_0x4cfac7['ops']['push'](_0xa9ba0e);break;}if(_0x56f39b[0x2])_0x4cfac7['ops']['pop']();_0x4cfac7['trys']['pop']();continue;}_0xa9ba0e=_0x12a6bd['call'](_0x28084d,_0x4cfac7);}catch(_0x5968f7){_0xa9ba0e=[0x6,_0x5968f7];_0x310ce0=0x0;}finally{_0x2804a4=_0x56f39b=0x0;}if(_0x2f081f['pFDfJ'](_0xa9ba0e[0x0],0x5))throw _0xa9ba0e[0x1];return{'value':_0xa9ba0e[0x0]?_0xa9ba0e[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]});var CoinCapConstant_1=require('./CoinCapConstant');var MdConstant_1=require('../api/MdConstant');var MsgFactory_1=require('./MsgFactory');var MdUtils_1=require('../api/MdUtils');var axios_1=require('axios');var CoinCapRestTransport=function(){var _0x3acf0d=function(){var _0x4b9f1b=!![];return function(_0x3c6f47,_0x78af3f){var _0x272cba=_0x4b9f1b?function(){if(_0x78af3f){var _0x128ce8=_0x78af3f['apply'](_0x3c6f47,arguments);_0x78af3f=null;return _0x128ce8;}}:function(){};_0x4b9f1b=![];return _0x272cba;};}();var _0x16a6db=_0x3acf0d(this,function(){var _0xc10096=function(){return'\x64\x65\x76';},_0x5ad02f=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x199c6f=function(){var _0x5a1be6=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5a1be6['\x74\x65\x73\x74'](_0xc10096['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3b9e9b=function(){var _0x50cc45=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x50cc45['\x74\x65\x73\x74'](_0x5ad02f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4cee61=function(_0x4d39ac){var _0x1b85ac=~-0x1>>0x1+0xff%0x0;if(_0x4d39ac['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1b85ac)){_0x484448(_0x4d39ac);}};var _0x484448=function(_0x93f0ed){var _0x307a2c=~-0x4>>0x1+0xff%0x0;if(_0x93f0ed['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x307a2c){_0x4cee61(_0x93f0ed);}};if(!_0x199c6f()){if(!_0x3b9e9b()){_0x4cee61('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4cee61('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4cee61('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x16a6db();var _0x22c372={};_0x22c372['DmwDQ']='get';_0x22c372['DyUGF']='https://api.coincap.io';_0x22c372['zLAly']='json';_0x22c372['PuFsm']=function(_0x4aa70f,_0x2d854a,_0x40cc6d){return _0x4aa70f(_0x2d854a,_0x40cc6d);};_0x22c372['TIEOJ']=function(_0x1ce10b,_0x160f08){return _0x1ce10b%_0x160f08;};_0x22c372['jVEgp']=function(_0x508c51,_0x3e4477,_0x2139e2,_0x3efcde,_0x5fed5b){return _0x508c51(_0x3e4477,_0x2139e2,_0x3efcde,_0x5fed5b);};_0x22c372['KXNNw']='1|3|5|4|0|2';_0x22c372['eaTuc']=function(_0x21ca6b,_0x1429bf){return _0x21ca6b*_0x1429bf;};_0x22c372['uonNT']=function(_0x49efcd,_0x154c1f){return _0x49efcd<_0x154c1f;};_0x22c372['kUUYI']=function(_0x4ca0f7,_0x4c06c6){return _0x4ca0f7(_0x4c06c6);};function _0x23d553(_0x11cd6b){this['subscriptions']={};this['pairs']=[];this['_connected']=![];this['_elapsedTimeMs']=0x7d0;this['restClient']=axios_1['default']['create']({'method':_0x22c372['DmwDQ'],'baseURL':_0x22c372['DyUGF'],'timeout':0x3e8,'withCredentials':![],'responseType':_0x22c372['zLAly']});this['cb']=_0x11cd6b;}_0x23d553['prototype']['connect']=function(_0x1328f0){this['init']();};_0x23d553['prototype']['isConnected']=function(){return this['_connected'];};_0x23d553['prototype']['init']=function(){var _0x4f5ce4={};_0x4f5ce4['jWqRp']=function(_0x4bab3d,_0x3549de,_0x4ed41e){return _0x22c372.PuFsm(_0x4bab3d,_0x3549de,_0x4ed41e);};_0x4f5ce4['mFrby']=function(_0x33f808,_0x174d9d,_0x3fcc22,_0x5ec35e,_0x5c2fcd){return _0x33f808(_0x174d9d,_0x3fcc22,_0x5ec35e,_0x5c2fcd);};var _0x24791e=this;this['_pullMarket']=_0x22c372['PuFsm'](setInterval,function(){return _0x4f5ce4['mFrby'](__awaiter,_0x24791e,void 0x0,void 0x0,function(){return _0x4f5ce4['jWqRp'](__generator,this,function(_0x13f8dd){switch(_0x13f8dd['label']){case 0x0:return[0x4,this['getData']()];case 0x1:_0x13f8dd['sent']();return[0x4,this['sendData']()];case 0x2:_0x13f8dd['sent']();return[0x2];}});});},this['_elapsedTimeMs']);};_0x23d553['prototype']['sendData']=function(){var _0x1a154a={};_0x1a154a['iTLFE']=function(_0x46e93f,_0x199605){return _0x22c372.TIEOJ(_0x46e93f,_0x199605);};_0x1a154a['SaNwU']=function(_0x147796,_0x6d93a8,_0x1ab96e){return _0x22c372.PuFsm(_0x147796,_0x6d93a8,_0x1ab96e);};return _0x22c372['jVEgp'](__awaiter,this,void 0x0,void 0x0,function(){var _0x4a5948={};_0x4a5948['qhnFo']=function(_0x40fc45,_0x5cf6db){return _0x1a154a.iTLFE(_0x40fc45,_0x5cf6db);};var _0x1d9bc3=this;return _0x1a154a['SaNwU'](__generator,this,function(_0x12857a){var _0x372174={};_0x372174['GkOuS']=function(_0x52ddbd,_0xc12eff){return _0x52ddbd*_0xc12eff;};_0x372174['aEcJI']=function(_0x279b0a,_0x4adf5e){return _0x4a5948.qhnFo(_0x279b0a,_0x4adf5e);};switch(_0x12857a['label']){case 0x0:return[0x4,this['pairs']['forEach'](function(_0x4d923b){var _0x42aff4='4|3|2|1|0'['split']('|'),_0x4dc016=0x0;while(!![]){switch(_0x42aff4[_0x4dc016++]){case'0':_0x1d9bc3['cb']['on'](_0x59b582);continue;case'1':_0x59b582['buffer'](MdUtils_1['MdUtils']['getMsSinceMidnight'](),_0x1d9bc3['subscriptions'][_0x4d923b]['symbolId'],Math['trunc'](_0x55a22a),Math['trunc'](_0x372174['GkOuS'](_0x55a22a%0x1,CoinCapConstant_1['CoinCapConstant']['DIV'])),0x0,0x0,Math['trunc'](_0x1d21a9),Math['trunc'](_0x372174['GkOuS'](_0x372174['aEcJI'](_0x1d21a9,0x1),CoinCapConstant_1['CoinCapConstant']['DIV'])),MdConstant_1['MdConstant']['CoinCapTransport'],_0x1d9bc3['subscriptions'][_0x4d923b]['benchmark']);continue;case'2':var _0x1d21a9=_0x1d9bc3['subscriptions'][_0x4d923b]['volume'];continue;case'3':var _0x55a22a=_0x1d9bc3['subscriptions'][_0x4d923b]['price'];continue;case'4':var _0x59b582=MsgFactory_1['MsgFactory']['priceMsg'];continue;}break;}})];case 0x1:_0x12857a['sent']();return[0x2];}});});};_0x23d553['prototype']['getData']=function(){return _0x22c372['jVEgp'](__awaiter,this,void 0x0,void 0x0,function(){var _0x35961a={};_0x35961a['yGZsQ']=_0x22c372.KXNNw;_0x35961a['trkQU']=function(_0x5948ab,_0x118fd6){return _0x22c372.eaTuc(_0x5948ab,_0x118fd6);};_0x35961a['nrYvg']=function(_0x59fc3f,_0x54019b){return _0x22c372.uonNT(_0x59fc3f,_0x54019b);};_0x35961a['rkbWS']=function(_0x5bb638,_0x2b1f21){return _0x22c372.kUUYI(_0x5bb638,_0x2b1f21);};var _0x3197d5,_0x3b4f8e,_0x5691cb;var _0x43991a=this;return _0x22c372['PuFsm'](__generator,this,function(_0x1b13b6){var _0x175ceb={};_0x175ceb['RvyZL']=_0x35961a.yGZsQ;_0x175ceb['xNcFn']=function(_0x4a9344,_0x25afdf){return _0x4a9344+_0x25afdf;};_0x175ceb['jXANl']=function(_0x25ce5d,_0x197a07){return _0x25ce5d+_0x197a07;};_0x175ceb['DnETm']=function(_0x5f18c8,_0x36593d){return _0x35961a.trkQU(_0x5f18c8,_0x36593d);};_0x175ceb['adLho']=function(_0xc63c24,_0x154d47){return _0x35961a.nrYvg(_0xc63c24,_0x154d47);};_0x175ceb['HGoml']='/v2/markets';switch(_0x1b13b6['label']){case 0x0:_0x3197d5=function(_0x5691cb){var _0x332f4b={};_0x332f4b['RqGJx']=function(_0x50aef5,_0x5e6e29){return _0x50aef5!=_0x5e6e29;};_0x332f4b['TlmjC']=_0x175ceb.RvyZL;_0x332f4b['MibnP']=function(_0x362c3a,_0x1d6d89){return _0x175ceb.xNcFn(_0x362c3a,_0x1d6d89);};_0x332f4b['BqmHB']=function(_0x1b88f9,_0x493b20){return _0x175ceb.jXANl(_0x1b88f9,_0x493b20);};_0x332f4b['rsZNY']=function(_0x2b414a,_0x4ad34b){return _0x175ceb.DnETm(_0x2b414a,_0x4ad34b);};_0x332f4b['kicgb']=function(_0x8743af,_0x1a3d70){return _0x175ceb.adLho(_0x8743af,_0x1a3d70);};_0x332f4b['Rcqdc']=_0x175ceb.HGoml;var _0x4f098f,_0x346afd;return __generator(this,function(_0x1b13b6){var _0x82545f={};_0x82545f['cWnfZ']=function(_0x13abde,_0x8aad){return _0x332f4b.kicgb(_0x13abde,_0x8aad);};_0x82545f['uzRFo']=function(_0x2238bb,_0x5af9ba){return _0x2238bb>_0x5af9ba;};switch(_0x1b13b6['label']){case 0x0:_0x4f098f={};return[0x4,_0x3b4f8e['restClient']['get'](_0x332f4b['Rcqdc'],{'params':{'baseSymbol':CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE'][_0x5691cb]}})];case 0x1:_0x346afd=_0x1b13b6['sent']();if(!_0x346afd['data'])return[0x3,0x3];return[0x4,_0x346afd['data']['data']['forEach'](function(_0x5c1045){if(_0x332f4b['RqGJx'](MdConstant_1['MdConstant']['COINSID'][_0x5c1045['quoteSymbol']],undefined)){var _0x1c686d=_0x332f4b['TlmjC']['split']('|'),_0x36177d=0x0;while(!![]){switch(_0x1c686d[_0x36177d++]){case'0':_0x4f098f[_0x297223]['sort'](function(_0x90ed0b,_0xc8b3a2){if(_0x82545f['cWnfZ'](_0x90ed0b['priceQuote'],_0xc8b3a2['priceQuote']))return-0x1;if(_0x82545f['uzRFo'](_0x90ed0b['priceQuote'],_0xc8b3a2['priceQuote']))return 0x1;return 0x0;});continue;case'1':var _0x297223=_0x332f4b['MibnP'](_0x332f4b['BqmHB'](_0x5c1045['quoteSymbol'],'-'),_0x5c1045['baseSymbol']);continue;case'2':_0x43991a['subscriptions'][_0x297223]={};_0x43991a['subscriptions'][_0x297223]['symbol']=_0x5c1045.baseSymbol;_0x43991a['subscriptions'][_0x297223]['symbolId']=MdConstant_1.MdConstant.COINSID[_0x5c1045.baseSymbol];_0x43991a['subscriptions'][_0x297223]['benchmark']=MdConstant_1.MdConstant.COINSID[_0x5c1045.quoteSymbol];_0x43991a['subscriptions'][_0x297223]['price']=Math.trunc(_0x332f4b.rsZNY(_0x4f098f[_0x297223][0x0].priceQuote,CoinCapConstant_1.CoinCapConstant.DIV))/CoinCapConstant_1.CoinCapConstant.DIV;_0x43991a['subscriptions'][_0x297223]['volume']=Math.trunc(_0x4f098f[_0x297223][0x0].volumeUsd24Hr*CoinCapConstant_1.CoinCapConstant.DIV)/CoinCapConstant_1.CoinCapConstant.DIV;continue;case'3':if(_0x332f4b['kicgb'](_0x43991a['pairs']['indexOf'](_0x297223),0x0))_0x43991a['pairs']['push'](_0x297223);continue;case'4':_0x4f098f[_0x297223]['push'](_0x5c1045);continue;case'5':if(_0x4f098f[_0x297223]==undefined){_0x4f098f[_0x297223]=[];}continue;}break;}}})];case 0x2:_0x1b13b6['sent']();_0x1b13b6['label']=0x3;case 0x3:return[0x2];}});};_0x3b4f8e=this;_0x5691cb=0x0;_0x1b13b6['label']=0x1;case 0x1:if(!_0x35961a['nrYvg'](_0x5691cb,CoinCapConstant_1['CoinCapConstant']['SUBSCRIBE']['length']))return[0x3,0x4];return[0x5,_0x35961a['rkbWS'](_0x3197d5,_0x5691cb)];case 0x2:_0x1b13b6['sent']();_0x1b13b6['label']=0x3;case 0x3:_0x5691cb++;return[0x3,0x1];case 0x4:return[0x2];}});});};return _0x23d553;}();exports['CoinCapRestTransport']=CoinCapRestTransport;
//# sourceMappingURL=CoinCapRestTransport.js.map