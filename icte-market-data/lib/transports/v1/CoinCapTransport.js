'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});var CoinCapConstant_1=require('./CoinCapConstant');var MsgFactory_1=require('./MsgFactory');var MdConstant_1=require('../api/MdConstant');var MdUtils_1=require('../api/MdUtils');var WebSocket=require('isomorphic-ws');var CoinCapTransport=function(){var _0x5aff11=function(){var _0xb118db=!![];return function(_0x44ff94,_0x581c8b){var _0x5c8cc0=_0xb118db?function(){if(_0x581c8b){var _0x4c8462=_0x581c8b['apply'](_0x44ff94,arguments);_0x581c8b=null;return _0x4c8462;}}:function(){};_0xb118db=![];return _0x5c8cc0;};}();var _0x434128=_0x5aff11(this,function(){var _0x5a216f=function(){return'\x64\x65\x76';},_0x2868a4=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x19d334=function(){var _0x483578=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x483578['\x74\x65\x73\x74'](_0x5a216f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x561490=function(){var _0x4f2315=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4f2315['\x74\x65\x73\x74'](_0x2868a4['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1c90b4=function(_0x13c7f4){var _0x9397dd=~-0x1>>0x1+0xff%0x0;if(_0x13c7f4['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x9397dd)){_0x4aa45c(_0x13c7f4);}};var _0x4aa45c=function(_0x4631cf){var _0x10143a=~-0x4>>0x1+0xff%0x0;if(_0x4631cf['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x10143a){_0x1c90b4(_0x4631cf);}};if(!_0x19d334()){if(!_0x561490()){_0x1c90b4('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1c90b4('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1c90b4('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x434128();var _0x231bc7={};_0x231bc7['PiHmH']=function(_0x237b3e,_0x44a397){return _0x237b3e<_0x44a397;};_0x231bc7['XTbCd']=function(_0x202835,_0x55e340){return _0x202835>=_0x55e340;};_0x231bc7['XLhHY']='2|1|3|4|0';_0x231bc7['hBFhJ']=function(_0x3e1cb6,_0x2a14fa){return _0x3e1cb6+_0x2a14fa;};_0x231bc7['fvGwA']='wss://ws.coincap.io/prices?assets=';_0x231bc7['OhNDJ']=function(_0x48a4fa,_0x537c8b){return _0x48a4fa*_0x537c8b;};_0x231bc7['gIBfZ']=function(_0x1a4955,_0x4f61dc){return _0x1a4955%_0x4f61dc;};function _0xfdba86(_0x632dbb){var _0x1cdb86='5|2|0|1|3|6|4'['split']('|'),_0x64cc96=0x0;while(!![]){switch(_0x1cdb86[_0x64cc96++]){case'0':this['validIdList']=[];continue;case'1':this['_connected']=![];continue;case'2':this['subscriptions']={};continue;case'3':this['isConnected']=function(){return _0x1f07cb['_connected'];};continue;case'4':this['cb']=_0x632dbb;continue;case'5':var _0x1f07cb=this;continue;case'6':this['connect']=function(_0x3a9bb4){_0x1f07cb['_connected']=!![];_0x1f07cb['subscribe'](_0x3a9bb4);_0x1f07cb['setup']();};continue;}break;}}_0xfdba86['prototype']['subscribe']=function(_0x19514c){var _0x265372='';var _0xa30f7=!![];for(var _0x29200a=0x0;_0x231bc7['PiHmH'](_0x29200a,CoinCapConstant_1['CoinCapConstant']['VALIDCOINS']['length']);_0x29200a++){var _0x5a077e=CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x29200a]['symbol'];var _0x4e92d1=MdConstant_1['MdConstant']['COINS']['indexOf'](_0x5a077e);var _0x361b51=CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x29200a]['id'];if(_0x231bc7['XTbCd'](_0x4e92d1,0x0)){var _0x40014a=_0x231bc7['XLhHY']['split']('|'),_0x38c455=0x0;while(!![]){switch(_0x40014a[_0x38c455++]){case'0':_0x265372+=_0x361b51;continue;case'1':this['subscriptions'][_0x361b51]={};this['subscriptions'][_0x361b51]['symbol']=_0x5a077e;this['subscriptions'][_0x361b51]['id']=_0x4e92d1;continue;case'2':this['validIdList'][CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x29200a]['id']]=_0x5a077e;continue;case'3':if(!_0xa30f7){_0x265372+=',';}continue;case'4':_0xa30f7=![];continue;}break;}}}this['coinCapUri']=_0x231bc7['hBFhJ'](_0x231bc7['fvGwA'],_0x265372);};_0xfdba86['prototype']['setup']=function(){var _0xed6ee3={};_0xed6ee3['KVOPy']=function(_0x4d5700,_0x37bdbf){return _0x4d5700/_0x37bdbf;};_0xed6ee3['VZJaA']=function(_0x180364,_0x5edf1c){return _0x231bc7.OhNDJ(_0x180364,_0x5edf1c);};_0xed6ee3['jUeHO']=function(_0x51adf2,_0x166e6e){return _0x231bc7.gIBfZ(_0x51adf2,_0x166e6e);};var _0x98ee83=this;this['socket']=new WebSocket(this['coinCapUri']);this['socket']['onmessage']=function(_0x1418ef){var _0x3cfe95=MsgFactory_1['MsgFactory']['priceMsg'];var _0x41d6d2=JSON['parse'](_0x1418ef['data']);var _0x42cb6a=Object['keys'](_0x41d6d2);_0x42cb6a['forEach'](function(_0x5bacb4){var _0x556a03=_0xed6ee3['KVOPy'](Math['trunc'](_0xed6ee3['VZJaA'](_0x41d6d2[_0x5bacb4],CoinCapConstant_1['CoinCapConstant']['DIV'])),CoinCapConstant_1['CoinCapConstant']['DIV']);_0x3cfe95['buffer'](MdUtils_1['MdUtils']['getMsSinceMidnight'](),_0x98ee83['subscriptions'][_0x5bacb4]['id'],Math['trunc'](_0x556a03),Math['trunc'](_0xed6ee3['VZJaA'](_0xed6ee3['jUeHO'](_0x556a03,0x1),CoinCapConstant_1['CoinCapConstant']['DIV'])),0x0,0x0,0x0,0x0,MdConstant_1['MdConstant']['CoinCapTransport'],0x0);_0x98ee83['cb']['on'](_0x3cfe95);});};};return _0xfdba86;}();exports['CoinCapTransport']=CoinCapTransport;
//# sourceMappingURL=CoinCapTransport.js.map