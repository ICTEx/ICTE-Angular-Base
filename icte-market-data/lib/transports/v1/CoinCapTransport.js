'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});var CoinCapConstant_1=require('./CoinCapConstant');var MsgFactory_1=require('./MsgFactory');var MdConstant_1=require('../api/MdConstant');var MdUtils_1=require('../api/MdUtils');var WebSocket=require('isomorphic-ws');var CoinCapTransport=function(){var _0xa9eb04=function(){var _0x522d08=!![];return function(_0x41c3bb,_0x87be74){var _0x593387=_0x522d08?function(){if(_0x87be74){var _0x4160ea=_0x87be74['apply'](_0x41c3bb,arguments);_0x87be74=null;return _0x4160ea;}}:function(){};_0x522d08=![];return _0x593387;};}();var _0x3be172=_0xa9eb04(this,function(){var _0x105c24=function(){return'\x64\x65\x76';},_0x3b8dea=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x278fc4=function(){var _0x4bb169=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4bb169['\x74\x65\x73\x74'](_0x105c24['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x597684=function(){var _0x3f141c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3f141c['\x74\x65\x73\x74'](_0x3b8dea['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x61bc0e=function(_0x54f21c){var _0x5f426f=~-0x1>>0x1+0xff%0x0;if(_0x54f21c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5f426f)){_0x4ed4a9(_0x54f21c);}};var _0x4ed4a9=function(_0x8a4e6f){var _0x2dbfde=~-0x4>>0x1+0xff%0x0;if(_0x8a4e6f['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2dbfde){_0x61bc0e(_0x8a4e6f);}};if(!_0x278fc4()){if(!_0x597684()){_0x61bc0e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x61bc0e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x61bc0e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3be172();var _0x33d8d2={};_0x33d8d2['xJeYi']=function(_0x590aff,_0x453d85){return _0x590aff<_0x453d85;};_0x33d8d2['vIdWs']=function(_0x373df5,_0x1dd9e6){return _0x373df5>=_0x1dd9e6;};_0x33d8d2['ohjoq']='3|1|2|4|0';_0x33d8d2['SKFgR']=function(_0x3859b7,_0x531f30){return _0x3859b7+_0x531f30;};_0x33d8d2['bbsxd']='3|1|2|0|4';_0x33d8d2['XPeKH']=function(_0x4f8fee,_0x559d90){return _0x4f8fee*_0x559d90;};function _0x3da55a(_0x4ba949){var _0x4ffe4b=this;this['subscriptions']={};this['validIdList']=[];this['_connected']=![];this['isConnected']=function(){return _0x4ffe4b['_connected'];};this['connect']=function(_0x8c485f){_0x4ffe4b['_connected']=!![];_0x4ffe4b['subscribe'](_0x8c485f);_0x4ffe4b['setup']();};this['cb']=_0x4ba949;}_0x3da55a['prototype']['subscribe']=function(_0x498a45){var _0x14fa5b='';var _0x28b4c0=!![];for(var _0x10b18a=0x0;_0x33d8d2['xJeYi'](_0x10b18a,CoinCapConstant_1['CoinCapConstant']['VALIDCOINS']['length']);_0x10b18a++){var _0x1309f8=CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x10b18a]['symbol'];var _0x58c194=MdConstant_1['MdConstant']['COINS']['indexOf'](_0x1309f8);var _0x4d43be=CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x10b18a]['id'];if(_0x33d8d2['vIdWs'](_0x58c194,0x0)){var _0x1f2099=_0x33d8d2['ohjoq']['split']('|'),_0x16e9cd=0x0;while(!![]){switch(_0x1f2099[_0x16e9cd++]){case'0':_0x14fa5b+=_0x4d43be;continue;case'1':this['subscriptions'][_0x4d43be]={};this['subscriptions'][_0x4d43be]['symbol']=_0x1309f8;this['subscriptions'][_0x4d43be]['id']=_0x58c194;continue;case'2':if(!_0x28b4c0){_0x14fa5b+=',';}continue;case'3':this['validIdList'][CoinCapConstant_1['CoinCapConstant']['VALIDCOINS'][_0x10b18a]['id']]=_0x1309f8;continue;case'4':_0x28b4c0=![];continue;}break;}}}this['coinCapUri']=_0x33d8d2['SKFgR']('wss://ws.coincap.io/prices?assets=',_0x14fa5b);};_0x3da55a['prototype']['setup']=function(){var _0x5bdf7c={};_0x5bdf7c['EjtQE']=_0x33d8d2.bbsxd;_0x5bdf7c['gjceC']=function(_0x62b8ee,_0x27b429){return _0x33d8d2.XPeKH(_0x62b8ee,_0x27b429);};_0x5bdf7c['ggNoQ']=function(_0x364926,_0x75b730){return _0x364926%_0x75b730;};var _0x4a730d=this;this['socket']=new WebSocket(this['coinCapUri']);this['socket']['onmessage']=function(_0x82797){var _0x527c54=_0x5bdf7c['EjtQE']['split']('|'),_0x88de7e=0x0;while(!![]){switch(_0x527c54[_0x88de7e++]){case'0':var _0x3dd882=Object['keys'](_0x59dbc4);continue;case'1':var _0x21a5dc=MsgFactory_1['MsgFactory']['priceMsg'];continue;case'2':var _0x59dbc4=JSON['parse'](_0x82797['data']);continue;case'3':var _0x14c240={};_0x14c240['RcJHH']=function(_0x543a6f,_0x1e496c){return _0x5bdf7c.gjceC(_0x543a6f,_0x1e496c);};_0x14c240['MUKtk']=function(_0x290b0f,_0x72fbeb){return _0x5bdf7c.ggNoQ(_0x290b0f,_0x72fbeb);};continue;case'4':_0x3dd882['forEach'](function(_0x10b436){var _0x12d9be=_0x59dbc4[_0x10b436];_0x21a5dc['buffer'](MdUtils_1['MdUtils']['getMsSinceMidnight'](),_0x4a730d['subscriptions'][_0x10b436]['id'],Math['trunc'](_0x12d9be),Math['trunc'](_0x14c240['RcJHH'](_0x14c240['MUKtk'](_0x12d9be,0x1),0x989680)),0x0,0x0,0x0,0x0,MdConstant_1['MdConstant']['CoinCapTransport'],0x0);_0x4a730d['cb']['on'](_0x21a5dc);});continue;}break;}};};return _0x3da55a;}();exports['CoinCapTransport']=CoinCapTransport;
//# sourceMappingURL=CoinCapTransport.js.map