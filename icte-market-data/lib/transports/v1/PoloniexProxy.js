'use strict';var __extends=this&&this['__extends']||function(){var _0x308d68={};_0x308d68['zaWpi']=function(_0x930267,_0x48b47){return _0x930267 instanceof _0x48b47;};_0x308d68['qWhsO']=function(_0x20dfc4,_0x142169,_0x486264){return _0x20dfc4(_0x142169,_0x486264);};_0x308d68['pHTjr']=function(_0x2710e3,_0x1bc663){return _0x2710e3===_0x1bc663;};var _0xa1548c=function(_0xe3af97,_0x1f8c7c){_0xa1548c=Object['setPrototypeOf']||_0x308d68['zaWpi']({'__proto__':[]},Array)&&function(_0xe3af97,_0x1f8c7c){_0xe3af97['__proto__']=_0x1f8c7c;}||function(_0xe3af97,_0x1f8c7c){for(var _0x5161cb in _0x1f8c7c)if(_0x1f8c7c['hasOwnProperty'](_0x5161cb))_0xe3af97[_0x5161cb]=_0x1f8c7c[_0x5161cb];};return _0x308d68['qWhsO'](_0xa1548c,_0xe3af97,_0x1f8c7c);};return function(_0x33fb5b,_0x31442d){_0x308d68['qWhsO'](_0xa1548c,_0x33fb5b,_0x31442d);function _0x1c2a42(){this['constructor']=_0x33fb5b;}_0x33fb5b['prototype']=_0x308d68['pHTjr'](_0x31442d,null)?Object['create'](_0x31442d):(_0x1c2a42['prototype']=_0x31442d['prototype'],new _0x1c2a42());};}();Object['defineProperty'](exports,'__esModule',{'value':!![]});var EventEmiter=require('events');var PoloniexConstants_1=require('./PoloniexConstants');var WebSocket=require('isomorphic-ws');var PoloniexProxy=function(_0x3551f1){var _0x236b42={};_0x236b42['fZhNE']='Connected';_0x236b42['eHLTc']='3|8|10|5|9|0|4|6|7|2|1';_0x236b42['jcwpI']=function(_0x3a3f06,_0x28ebcf){return _0x3a3f06===_0x28ebcf;};_0x236b42['VCQhl']='Empty\x20data';_0x236b42['MKxmP']=function(_0x2e21e0,_0x39b716){return _0x2e21e0<_0x39b716;};_0x236b42['wJKhB']=function(_0x54ca46,_0x3bca3a){return _0x54ca46(_0x3bca3a);};_0x236b42['wxVGZ']='1002';_0x236b42['EQCyn']=function(_0x5e28a3,_0x4a4179){return _0x5e28a3!=_0x4a4179;};_0x236b42['GLDIC']=function(_0x537a7d,_0x32f749){return _0x537a7d+_0x32f749;};_0x236b42['qrKUS']='nonce=';_0x236b42['ldTII']=function(_0x39b44b,_0x2087e4){return _0x39b44b-_0x2087e4;};_0x236b42['pXptd']=function(_0x172d30,_0x52c38e){return _0x172d30<_0x52c38e;};_0x236b42['KFods']=function(_0x5d1f3f,_0x23e694){return _0x5d1f3f!=_0x23e694;};_0x236b42['DhDjN']=function(_0x41f7bd,_0x5327d5,_0x285bee){return _0x41f7bd(_0x5327d5,_0x285bee);};_0x236b42['DhDjN'](__extends,_0x464120,_0x3551f1);function _0x464120(){var _0x5d3e39=_0x236b42['eHLTc']['split']('|'),_0x4244bf=0x0;while(!![]){switch(_0x5d3e39[_0x4244bf++]){case'0':_0x4de3f9['webSocket']['onopen']=function(_0x2b975c){_0x4de3f9['_keepAliveInterval']=setInterval(function(){_0x4de3f9['webSocket']['send']('.');},PoloniexConstants_1['PoloniexConstants']['PINGTIME']);_0x4de3f9['wsState']=_0x2b975c['target']['readyState'];while(_0x4de3f9['commandsQueue']['length'])_0x4de3f9['send']['apply'](_0x4de3f9,_0x4de3f9['commandsQueue']['shift']());_0x4de3f9['emit'](PoloniexConstants_1['PoloniexConstants']['OPENEVENT'],_0x236b42['fZhNE']);};continue;case'1':return _0x4de3f9;case'2':_0x4de3f9['subscribe']();continue;case'3':var _0x1e2839={};_0x1e2839['wlqxt']=function(_0x3d6648,_0x53c686){return _0x236b42.jcwpI(_0x3d6648,_0x53c686);};_0x1e2839['oAPPM']=_0x236b42.VCQhl;_0x1e2839['AsxIq']=function(_0x5d8be4,_0x8f1d47){return _0x5d8be4 in _0x8f1d47;};_0x1e2839['EPkFN']='error';_0x1e2839['kBIVR']=function(_0x2f95db,_0x3dd558){return _0x2f95db<_0x3dd558;};_0x1e2839['UaBYs']=function(_0x35eddd,_0x513431){return _0x236b42.MKxmP(_0x35eddd,_0x513431);};_0x1e2839['MCUlR']=function(_0x362564,_0x3499bf){return _0x236b42.wJKhB(_0x362564,_0x3499bf);};_0x1e2839['MqoUh']=function(_0x25c008,_0x496021){return _0x236b42.wJKhB(_0x25c008,_0x496021);};continue;case'4':_0x4de3f9['webSocket']['onmessage']=function(_0x5a0ef8){var _0x5bc841=0x0;var _0x257ab7=JSON['parse'](_0x5a0ef8['data']);if(_0x1e2839['wlqxt'](_0x5a0ef8['data']['length'],0x0))throw new Error(_0x1e2839['oAPPM']);if(_0x1e2839['AsxIq'](_0x1e2839['EPkFN'],_0x257ab7))return _0x4de3f9['emit'](_0x1e2839['EPkFN'],_0x257ab7);var _0x183aba=_0x257ab7['shift']();if(_0x183aba==PoloniexConstants_1['PoloniexConstants']['TICKER']){_0x5bc841=-0x1;return _0x4de3f9['_marketEvent'](_0x183aba,_0x5bc841,_0x257ab7);}if(_0x1e2839['kBIVR'](PoloniexConstants_1['PoloniexConstants']['MINPAIR'],_0x183aba)&&_0x1e2839['UaBYs'](_0x183aba,PoloniexConstants_1['PoloniexConstants']['MAXPAIR'])){_0x5bc841=_0x257ab7[0x0];return _0x4de3f9['_marketEvent'](_0x183aba,_0x5bc841,_0x257ab7);}if(_0x1e2839['wlqxt'](_0x183aba,PoloniexConstants_1['PoloniexConstants']['HEARTBEAT']))return;};continue;case'5':_0x4de3f9['commandsQueue']=[];continue;case'6':_0x4de3f9['webSocket']['onerror']=function(_0x1d6d67){if(/403/['test'](_0x1d6d67['message'])){_0x1e2839['MCUlR'](clearInterval,_0x4de3f9['_keepAliveInterval']);_0x4de3f9['webSocket']['terminate']();_0x4de3f9['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],'Poloniex\x20is\x20protected\x20with\x20CloudFlare\x20&\x20reCaptcha.');process['exit']();}else{_0x4de3f9['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],_0x1d6d67['message']);}};continue;case'7':_0x4de3f9['webSocket']['onclose']=function(_0x217a45){_0x1e2839['MqoUh'](clearInterval,_0x4de3f9['_keepAliveInterval']);_0x4de3f9['emit'](PoloniexConstants_1['PoloniexConstants']['CLOSEEVENT'],_0x217a45);};continue;case'8':var _0x4de3f9=_0x3551f1['call'](this)||this;continue;case'9':_0x4de3f9['webSocket']=new WebSocket(PoloniexConstants_1['PoloniexConstants']['poloniexUrl'],[],PoloniexConstants_1['PoloniexConstants']['header']);continue;case'10':_0x4de3f9['wsState']=WebSocket['CLOSE'];continue;}break;}}_0x464120['prototype']['subscribe']=function(){var _0x3faa03=this;this['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x236b42['wxVGZ']);var _0x325eab=Object['keys'](PoloniexConstants_1['PoloniexConstants']['validPairs']);_0x325eab['forEach'](function(_0x4a1af9){_0x3faa03['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x4a1af9);});};;_0x464120['prototype']['send']=function(_0x3c27c5,_0x4f003c){if(_0x236b42['EQCyn'](this['wsState'],WebSocket['OPEN'])){return this['commandsQueue']['push']([_0x3c27c5,_0x4f003c]);}var _0x2f973d=PoloniexConstants_1['PoloniexConstants']['sign'];var _0x16f315=PoloniexConstants_1['PoloniexConstants']['key'];var _0x2de605=_0x236b42['GLDIC'](_0x236b42['qrKUS'],Math['round'](new Date()['getTime']()/0x3e8));var _0x593481=JSON['stringify']({'command':_0x3c27c5,'channel':_0x4f003c,'key':_0x16f315,'payload':_0x2de605,'sign':_0x2f973d});this['webSocket']['send'](_0x593481);};_0x464120['prototype']['_marketEvent']=function(_0x40bf46,_0x4fcd99){var _0x3c70f2=[];for(var _0x344345=0x2;_0x344345<arguments['length'];_0x344345++){_0x3c70f2[_0x236b42['ldTII'](_0x344345,0x2)]=arguments[_0x344345];}if(_0x4fcd99>0x1){for(var _0xa5c087=0x0,_0x30e19c=_0x3c70f2;_0x236b42['pXptd'](_0xa5c087,_0x30e19c['length']);_0xa5c087++){var _0x51a299='4|3|2|5|0|1'['split']('|'),_0x2f2c34=0x0;while(!![]){switch(_0x51a299[_0x2f2c34++]){case'0':var _0x69050c=_0x3e0cfd['shift']();continue;case'1':this['emit'](_0x69050c,_0x40bf46,_0x4fcd99,_0x3e0cfd);continue;case'2':var _0x1c7449=_0x45ec['shift']();continue;case'3':_0x45ec['shift']();continue;case'4':var _0x45ec=_0x30e19c[_0xa5c087];continue;case'5':var _0x3e0cfd=_0x1c7449['shift']();continue;}break;}}}else{var _0x166b35=_0x3c70f2['shift']();for(var _0x558954 in _0x166b35){if(_0x236b42['KFods'](_0x166b35[_0x558954],null)){var _0x47e667=_0x166b35[_0x558954];var _0x5a2886=_0x47e667[0x0];this['emit'](PoloniexConstants_1['PoloniexConstants']['TICKEREVENT'],_0x5a2886,_0x47e667);}}}};return _0x464120;}(EventEmiter);exports['PoloniexProxy']=PoloniexProxy;