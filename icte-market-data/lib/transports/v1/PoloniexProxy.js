'use strict';var __extends=this&&this['__extends']||function(){var _0xdca193={};_0xdca193['YhTRf']=function(_0x4d0021,_0x2108aa){return _0x4d0021 instanceof _0x2108aa;};_0xdca193['bKlTK']=function(_0x3da874,_0x760119,_0x3d24ff){return _0x3da874(_0x760119,_0x3d24ff);};var _0x176177=function(_0x4bd734,_0x15a7ab){_0x176177=Object['setPrototypeOf']||_0xdca193['YhTRf']({'__proto__':[]},Array)&&function(_0x4bd734,_0x15a7ab){_0x4bd734['__proto__']=_0x15a7ab;}||function(_0x4bd734,_0x15a7ab){for(var _0x35323f in _0x15a7ab)if(_0x15a7ab['hasOwnProperty'](_0x35323f))_0x4bd734[_0x35323f]=_0x15a7ab[_0x35323f];};return _0xdca193['bKlTK'](_0x176177,_0x4bd734,_0x15a7ab);};return function(_0x28e6ab,_0x3e1883){_0xdca193['bKlTK'](_0x176177,_0x28e6ab,_0x3e1883);function _0x2e7c9a(){this['constructor']=_0x28e6ab;}_0x28e6ab['prototype']=_0x3e1883===null?Object['create'](_0x3e1883):(_0x2e7c9a['prototype']=_0x3e1883['prototype'],new _0x2e7c9a());};}();Object['defineProperty'](exports,'__esModule',{'value':!![]});var EventEmiter=require('events');var PoloniexConstants_1=require('./PoloniexConstants');var WebSocket=require('isomorphic-ws');var PoloniexProxy=function(_0x14602b){var _0x47e043=function(){var _0x643757=!![];return function(_0x5460b8,_0x183613){var _0x31b882=_0x643757?function(){if(_0x183613){var _0x54c712=_0x183613['apply'](_0x5460b8,arguments);_0x183613=null;return _0x54c712;}}:function(){};_0x643757=![];return _0x31b882;};}();var _0x52e7e8=_0x47e043(this,function(){var _0x305a8c=function(){return'\x64\x65\x76';},_0x3af8ff=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x38b65c=function(){var _0x2d3946=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x2d3946['\x74\x65\x73\x74'](_0x305a8c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3f43b1=function(){var _0x29de71=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x29de71['\x74\x65\x73\x74'](_0x3af8ff['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3ee7d6=function(_0x4d4973){var _0x1c6962=~-0x1>>0x1+0xff%0x0;if(_0x4d4973['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1c6962)){_0x27ca52(_0x4d4973);}};var _0x27ca52=function(_0x376139){var _0x5d5559=~-0x4>>0x1+0xff%0x0;if(_0x376139['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5d5559){_0x3ee7d6(_0x376139);}};if(!_0x38b65c()){if(!_0x3f43b1()){_0x3ee7d6('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3ee7d6('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3ee7d6('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x52e7e8();var _0x1ef9d1={};_0x1ef9d1['JIIJK']='3|0|4|1|2|7|5|6';_0x1ef9d1['NtGXG']='error';_0x1ef9d1['fKeIU']=function(_0x1c5643,_0x3d2c8a){return _0x1c5643===_0x3d2c8a;};_0x1ef9d1['rScJl']='Empty\x20data';_0x1ef9d1['GpYMS']=function(_0x18a1b0,_0x2941aa){return _0x18a1b0<_0x2941aa;};_0x1ef9d1['Sxjtp']=function(_0x981778,_0x3aff1d){return _0x981778===_0x3aff1d;};_0x1ef9d1['deSvV']=function(_0x32dc5c,_0x2b55df){return _0x32dc5c==_0x2b55df;};_0x1ef9d1['XJiCm']=function(_0x4312cf,_0xd936de){return _0x4312cf(_0xd936de);};_0x1ef9d1['JNQEH']='Poloniex\x20is\x20protected\x20with\x20CloudFlare\x20&\x20reCaptcha.';_0x1ef9d1['PmeAd']='1|9|10|4|6|0|8|5|2|3|7';_0x1ef9d1['pQlOQ']=function(_0x5d9ac1,_0x2220bf,_0x3f8dcf){return _0x5d9ac1(_0x2220bf,_0x3f8dcf);};_0x1ef9d1['UjaJz']=function(_0x5b02d5,_0x25a2ce){return _0x5b02d5(_0x25a2ce);};_0x1ef9d1['ZYagq']='1002';_0x1ef9d1['RhpJW']='3|4|5|1|2|0';_0x1ef9d1['vPANa']=function(_0x367dd2,_0x428093){return _0x367dd2+_0x428093;};_0x1ef9d1['WwXzY']=function(_0x3f9dae,_0x31c1e6){return _0x3f9dae/_0x31c1e6;};_0x1ef9d1['Qptjp']=function(_0x5790cd,_0x196abb){return _0x5790cd!=_0x196abb;};_0x1ef9d1['kgGXy']=function(_0x294cfb,_0x1e27f9){return _0x294cfb-_0x1e27f9;};_0x1ef9d1['QdeBa']=function(_0x1d70b4,_0x5ac4d4){return _0x1d70b4>_0x5ac4d4;};_0x1ef9d1['gYEcT']=function(_0x6710f7,_0x307eba){return _0x6710f7<_0x307eba;};_0x1ef9d1['JJfgi']='5|1|0|2|3|4';_0x1ef9d1['gaAon']=function(_0x51d272,_0x44100a){return _0x51d272!=_0x44100a;};_0x1ef9d1['GWUpv']=function(_0x3857e8,_0x29ed83,_0x1fb051){return _0x3857e8(_0x29ed83,_0x1fb051);};_0x1ef9d1['GWUpv'](__extends,_0x17186f,_0x14602b);function _0x17186f(){var _0x283a29=_0x1ef9d1['PmeAd']['split']('|'),_0x1fe83d=0x0;while(!![]){switch(_0x283a29[_0x1fe83d++]){case'0':_0x4ed5b5['webSocket']['onopen']=function(_0x1636eb){_0x4ed5b5['_keepAliveInterval']=_0x5b638a['FKVDU'](setInterval,function(){_0x4ed5b5['webSocket']['send']('.');},PoloniexConstants_1['PoloniexConstants']['PINGTIME']);_0x4ed5b5['wsState']=_0x1636eb['target']['readyState'];while(_0x4ed5b5['commandsQueue']['length'])_0x4ed5b5['send']['apply'](_0x4ed5b5,_0x4ed5b5['commandsQueue']['shift']());_0x4ed5b5['emit'](PoloniexConstants_1['PoloniexConstants']['OPENEVENT'],_0x5b638a['bLVRB']);};continue;case'1':var _0x5b638a={};_0x5b638a['FKVDU']=function(_0x3a0ed6,_0x3668ad,_0x5e2495){return _0x1ef9d1.pQlOQ(_0x3a0ed6,_0x3668ad,_0x5e2495);};_0x5b638a['bLVRB']='Connected';_0x5b638a['VhXqF']=function(_0x45de4e,_0x18411f){return _0x1ef9d1.UjaJz(_0x45de4e,_0x18411f);};continue;case'2':_0x4ed5b5['webSocket']['onclose']=function(_0x3c80e4){_0x5b638a['VhXqF'](clearInterval,_0x4ed5b5['_keepAliveInterval']);_0x4ed5b5['emit'](PoloniexConstants_1['PoloniexConstants']['CLOSEEVENT'],_0x3c80e4);};continue;case'3':_0x4ed5b5['subscribe']();continue;case'4':_0x4ed5b5['commandsQueue']=[];continue;case'5':_0x4ed5b5['webSocket']['onerror']=function(_0x826ff7){if(/403/['test'](_0x826ff7['message'])){_0x1ef9d1['XJiCm'](clearInterval,_0x4ed5b5['_keepAliveInterval']);_0x4ed5b5['webSocket']['terminate']();_0x4ed5b5['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],_0x1ef9d1['JNQEH']);process['exit']();}else{_0x4ed5b5['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],_0x826ff7['message']);}};continue;case'6':_0x4ed5b5['webSocket']=new WebSocket(PoloniexConstants_1['PoloniexConstants']['poloniexUrl'],[],PoloniexConstants_1['PoloniexConstants']['header']);continue;case'7':return _0x4ed5b5;case'8':_0x4ed5b5['webSocket']['onmessage']=function(_0x282e50){var _0x3899e9=_0x1ef9d1['JIIJK']['split']('|'),_0x3549fd=0x0;while(!![]){switch(_0x3899e9[_0x3549fd++]){case'0':var _0x284a3e=JSON['parse'](_0x282e50['data']);continue;case'1':if(_0x1ef9d1['NtGXG']in _0x284a3e)return _0x4ed5b5['emit'](_0x1ef9d1['NtGXG'],_0x284a3e);continue;case'2':var _0x288fd2=_0x284a3e['shift']();continue;case'3':var _0x3931f3=0x0;continue;case'4':if(_0x1ef9d1['fKeIU'](_0x282e50['data']['length'],0x0))throw new Error(_0x1ef9d1['rScJl']);continue;case'5':if(_0x1ef9d1['GpYMS'](PoloniexConstants_1['PoloniexConstants']['MINPAIR'],_0x288fd2)&&_0x288fd2<PoloniexConstants_1['PoloniexConstants']['MAXPAIR']){_0x3931f3=_0x284a3e[0x0];return _0x4ed5b5['_marketEvent'](_0x288fd2,_0x3931f3,_0x284a3e);}continue;case'6':if(_0x1ef9d1['Sxjtp'](_0x288fd2,PoloniexConstants_1['PoloniexConstants']['HEARTBEAT']))return;continue;case'7':if(_0x1ef9d1['deSvV'](_0x288fd2,PoloniexConstants_1['PoloniexConstants']['TICKER'])){_0x3931f3=-0x1;return _0x4ed5b5['_marketEvent'](_0x288fd2,_0x3931f3,_0x284a3e);}continue;}break;}};continue;case'9':var _0x4ed5b5=_0x14602b['call'](this)||this;continue;case'10':_0x4ed5b5['wsState']=WebSocket['CLOSE'];continue;}break;}}_0x17186f['prototype']['subscribe']=function(){var _0x3015b3=this;this['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x1ef9d1['ZYagq']);var _0x4d513a=Object['keys'](PoloniexConstants_1['PoloniexConstants']['validPairs']);_0x4d513a['forEach'](function(_0x4d7409){_0x3015b3['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x4d7409);});};;_0x17186f['prototype']['send']=function(_0x21de52,_0x5167cd){var _0x3e71e1=_0x1ef9d1['RhpJW']['split']('|'),_0x543436=0x0;while(!![]){switch(_0x3e71e1[_0x543436++]){case'0':this['webSocket']['send'](_0x43b314);continue;case'1':var _0x51c4cc=_0x1ef9d1['vPANa']('nonce=',Math['round'](_0x1ef9d1['WwXzY'](new Date()['getTime'](),0x3e8)));continue;case'2':var _0x43b314=JSON['stringify']({'command':_0x21de52,'channel':_0x5167cd,'key':_0x198437,'payload':_0x51c4cc,'sign':_0x222d7b});continue;case'3':if(_0x1ef9d1['Qptjp'](this['wsState'],WebSocket['OPEN'])){return this['commandsQueue']['push']([_0x21de52,_0x5167cd]);}continue;case'4':var _0x222d7b=PoloniexConstants_1['PoloniexConstants']['sign'];continue;case'5':var _0x198437=PoloniexConstants_1['PoloniexConstants']['key'];continue;}break;}};_0x17186f['prototype']['_marketEvent']=function(_0x4ebac4,_0x24c3bc){var _0x50b9b0=[];for(var _0x3a379e=0x2;_0x1ef9d1['GpYMS'](_0x3a379e,arguments['length']);_0x3a379e++){_0x50b9b0[_0x1ef9d1['kgGXy'](_0x3a379e,0x2)]=arguments[_0x3a379e];}if(_0x1ef9d1['QdeBa'](_0x24c3bc,0x1)){for(var _0x55d943=0x0,_0x3a5228=_0x50b9b0;_0x1ef9d1['gYEcT'](_0x55d943,_0x3a5228['length']);_0x55d943++){var _0x64f4c=_0x1ef9d1['JJfgi']['split']('|'),_0x2e17bb=0x0;while(!![]){switch(_0x64f4c[_0x2e17bb++]){case'0':var _0x351dce=_0x2b5a11['shift']();continue;case'1':_0x2b5a11['shift']();continue;case'2':var _0x5ae0c7=_0x351dce['shift']();continue;case'3':var _0x6e12bc=_0x5ae0c7['shift']();continue;case'4':this['emit'](_0x6e12bc,_0x4ebac4,_0x24c3bc,_0x5ae0c7);continue;case'5':var _0x2b5a11=_0x3a5228[_0x55d943];continue;}break;}}}else{var _0x31e76f=_0x50b9b0['shift']();for(var _0x4a1826 in _0x31e76f){if(_0x1ef9d1['gaAon'](_0x31e76f[_0x4a1826],null)){var _0x565a92=_0x31e76f[_0x4a1826];var _0x4d3e7c=_0x565a92[0x0];this['emit'](PoloniexConstants_1['PoloniexConstants']['TICKEREVENT'],_0x4d3e7c,_0x565a92);}}}};return _0x17186f;}(EventEmiter);exports['PoloniexProxy']=PoloniexProxy;
//# sourceMappingURL=PoloniexProxy.js.map