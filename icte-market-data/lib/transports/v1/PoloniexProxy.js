'use strict';var __extends=this&&this['__extends']||function(){var _0x32159e={};_0x32159e['wdQXj']=function(_0x3d3a94,_0x22f5fb){return _0x3d3a94 instanceof _0x22f5fb;};_0x32159e['tWvkg']=function(_0x4b91b6,_0x47850a,_0x4ef996){return _0x4b91b6(_0x47850a,_0x4ef996);};_0x32159e['HAdkQ']=function(_0x44eea7,_0x1be639){return _0x44eea7===_0x1be639;};var _0x433909=function(_0x49baa2,_0x5c16b5){_0x433909=Object['setPrototypeOf']||_0x32159e['wdQXj']({'__proto__':[]},Array)&&function(_0x49baa2,_0x5c16b5){_0x49baa2['__proto__']=_0x5c16b5;}||function(_0x49baa2,_0x5c16b5){for(var _0x86d098 in _0x5c16b5)if(_0x5c16b5['hasOwnProperty'](_0x86d098))_0x49baa2[_0x86d098]=_0x5c16b5[_0x86d098];};return _0x433909(_0x49baa2,_0x5c16b5);};return function(_0x51debb,_0x27f234){_0x32159e['tWvkg'](_0x433909,_0x51debb,_0x27f234);function _0x3829f4(){this['constructor']=_0x51debb;}_0x51debb['prototype']=_0x32159e['HAdkQ'](_0x27f234,null)?Object['create'](_0x27f234):(_0x3829f4['prototype']=_0x27f234['prototype'],new _0x3829f4());};}();Object['defineProperty'](exports,'__esModule',{'value':!![]});var EventEmiter=require('events');var PoloniexConstants_1=require('./PoloniexConstants');var WebSocket=require('isomorphic-ws');var PoloniexProxy=function(_0x11915a){var _0x3c8fd6=function(){var _0x4b1df9=!![];return function(_0x151ed7,_0x4555fb){var _0x4ea15e=_0x4b1df9?function(){if(_0x4555fb){var _0x134ab4=_0x4555fb['apply'](_0x151ed7,arguments);_0x4555fb=null;return _0x134ab4;}}:function(){};_0x4b1df9=![];return _0x4ea15e;};}();var _0x4896bd=_0x3c8fd6(this,function(){var _0x3a3d4f=function(){return'\x64\x65\x76';},_0x52b650=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5c9c0f=function(){var _0x1b9b86=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1b9b86['\x74\x65\x73\x74'](_0x3a3d4f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2dfbb6=function(){var _0x360a14=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x360a14['\x74\x65\x73\x74'](_0x52b650['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x48db0d=function(_0x4ad437){var _0x45dadb=~-0x1>>0x1+0xff%0x0;if(_0x4ad437['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x45dadb)){_0x1d5e3b(_0x4ad437);}};var _0x1d5e3b=function(_0x3038de){var _0x3d5b42=~-0x4>>0x1+0xff%0x0;if(_0x3038de['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3d5b42){_0x48db0d(_0x3038de);}};if(!_0x5c9c0f()){if(!_0x2dfbb6()){_0x48db0d('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x48db0d('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x48db0d('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x4896bd();var _0x3ebe2a={};_0x3ebe2a['vZVne']='error';_0x3ebe2a['IhGjE']=function(_0x31e7bf,_0x23d361){return _0x31e7bf<_0x23d361;};_0x3ebe2a['tfQfX']=function(_0x209e7d,_0x3ce53d){return _0x209e7d==_0x3ce53d;};_0x3ebe2a['YdyYa']=function(_0x31658f,_0x19ce1f){return _0x31658f===_0x19ce1f;};_0x3ebe2a['niXwO']=function(_0x8cb0e,_0x4173e7){return _0x8cb0e(_0x4173e7);};_0x3ebe2a['ncCbG']='Poloniex\x20is\x20protected\x20with\x20CloudFlare\x20&\x20reCaptcha.';_0x3ebe2a['XLdwb']=function(_0x250199,_0x58a5b8){return _0x250199(_0x58a5b8);};_0x3ebe2a['fnlNl']='0|1|8|5|2|3|4|10|7|9|6';_0x3ebe2a['KQGhk']='Connected';_0x3ebe2a['VTFSf']='1002';_0x3ebe2a['IbvGe']='2|5|4|3|1|0';_0x3ebe2a['bUsCf']=function(_0x59aa69,_0x349493){return _0x59aa69!=_0x349493;};_0x3ebe2a['YUiQS']=function(_0x1c264e,_0x6c1721){return _0x1c264e+_0x6c1721;};_0x3ebe2a['cKElJ']='nonce=';_0x3ebe2a['jVrkG']=function(_0x33ed5f,_0x57f947){return _0x33ed5f<_0x57f947;};_0x3ebe2a['PJcVT']=function(_0x3d7396,_0x4f3d6b){return _0x3d7396-_0x4f3d6b;};_0x3ebe2a['hRUgR']=function(_0x22419a,_0x27befe){return _0x22419a>_0x27befe;};_0x3ebe2a['YOYkH']=function(_0x66feae,_0x5f3da1){return _0x66feae!=_0x5f3da1;};_0x3ebe2a['ZAVRI']=function(_0x31a0b8,_0x2d93e4,_0x51e7b1){return _0x31a0b8(_0x2d93e4,_0x51e7b1);};_0x3ebe2a['ZAVRI'](__extends,_0x14d219,_0x11915a);function _0x14d219(){var _0x2f32fc=_0x3ebe2a['fnlNl']['split']('|'),_0x94e460=0x0;while(!![]){switch(_0x2f32fc[_0x94e460++]){case'0':var _0x239c04={};_0x239c04['kkSxr']=_0x3ebe2a.KQGhk;continue;case'1':var _0x1464b0=_0x11915a['call'](this)||this;continue;case'2':_0x1464b0['webSocket']=new WebSocket(PoloniexConstants_1['PoloniexConstants']['poloniexUrl'],[],PoloniexConstants_1['PoloniexConstants']['header']);continue;case'3':_0x1464b0['webSocket']['onopen']=function(_0x493e16){_0x1464b0['_keepAliveInterval']=setInterval(function(){_0x1464b0['webSocket']['send']('.');},PoloniexConstants_1['PoloniexConstants']['PINGTIME']);_0x1464b0['wsState']=_0x493e16['target']['readyState'];while(_0x1464b0['commandsQueue']['length'])_0x1464b0['send']['apply'](_0x1464b0,_0x1464b0['commandsQueue']['shift']());_0x1464b0['emit'](PoloniexConstants_1['PoloniexConstants']['OPENEVENT'],_0x239c04['kkSxr']);};continue;case'4':_0x1464b0['webSocket']['onmessage']=function(_0x14dead){var _0x231e80='1|2|5|0|7|4|3|6'['split']('|'),_0x302482=0x0;while(!![]){switch(_0x231e80[_0x302482++]){case'0':if('error'in _0x34dbd8)return _0x1464b0['emit'](_0x3ebe2a['vZVne'],_0x34dbd8);continue;case'1':var _0x445128=0x0;continue;case'2':var _0x34dbd8=JSON['parse'](_0x14dead['data']);continue;case'3':if(_0x3ebe2a['IhGjE'](PoloniexConstants_1['PoloniexConstants']['MINPAIR'],_0x6f83fa)&&_0x6f83fa<PoloniexConstants_1['PoloniexConstants']['MAXPAIR']){_0x445128=_0x34dbd8[0x0];return _0x1464b0['_marketEvent'](_0x6f83fa,_0x445128,_0x34dbd8);}continue;case'4':if(_0x3ebe2a['tfQfX'](_0x6f83fa,PoloniexConstants_1['PoloniexConstants']['TICKER'])){_0x445128=-0x1;return _0x1464b0['_marketEvent'](_0x6f83fa,_0x445128,_0x34dbd8);}continue;case'5':if(_0x3ebe2a['YdyYa'](_0x14dead['data']['length'],0x0))throw new Error('Empty\x20data');continue;case'6':if(_0x6f83fa===PoloniexConstants_1['PoloniexConstants']['HEARTBEAT'])return;continue;case'7':var _0x6f83fa=_0x34dbd8['shift']();continue;}break;}};continue;case'5':_0x1464b0['commandsQueue']=[];continue;case'6':return _0x1464b0;case'7':_0x1464b0['webSocket']['onclose']=function(_0x330e68){_0x3ebe2a['XLdwb'](clearInterval,_0x1464b0['_keepAliveInterval']);_0x1464b0['emit'](PoloniexConstants_1['PoloniexConstants']['CLOSEEVENT'],_0x330e68);};continue;case'8':_0x1464b0['wsState']=WebSocket['CLOSE'];continue;case'9':_0x1464b0['subscribe']();continue;case'10':_0x1464b0['webSocket']['onerror']=function(_0x1104dc){if(/403/['test'](_0x1104dc['message'])){_0x3ebe2a['niXwO'](clearInterval,_0x1464b0['_keepAliveInterval']);_0x1464b0['webSocket']['terminate']();_0x1464b0['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],_0x3ebe2a['ncCbG']);process['exit']();}else{_0x1464b0['emit'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],_0x1104dc['message']);}};continue;}break;}}_0x14d219['prototype']['subscribe']=function(){var _0x9b4b36=this;this['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x3ebe2a['VTFSf']);var _0x335104=Object['keys'](PoloniexConstants_1['PoloniexConstants']['validPairs']);_0x335104['forEach'](function(_0x47e509){_0x9b4b36['send'](PoloniexConstants_1['PoloniexConstants']['SUBSCRIBE'],_0x47e509);});};;_0x14d219['prototype']['send']=function(_0x14db97,_0x233571){var _0x13b66e=_0x3ebe2a['IbvGe']['split']('|'),_0x2e1ba8=0x0;while(!![]){switch(_0x13b66e[_0x2e1ba8++]){case'0':this['webSocket']['send'](_0x556ca6);continue;case'1':var _0x556ca6=JSON['stringify']({'command':_0x14db97,'channel':_0x233571,'key':_0xe77b9a,'payload':_0x1968c0,'sign':_0x1d1351});continue;case'2':if(_0x3ebe2a['bUsCf'](this['wsState'],WebSocket['OPEN'])){return this['commandsQueue']['push']([_0x14db97,_0x233571]);}continue;case'3':var _0x1968c0=_0x3ebe2a['YUiQS'](_0x3ebe2a['cKElJ'],Math['round'](new Date()['getTime']()/0x3e8));continue;case'4':var _0xe77b9a=PoloniexConstants_1['PoloniexConstants']['key'];continue;case'5':var _0x1d1351=PoloniexConstants_1['PoloniexConstants']['sign'];continue;}break;}};_0x14d219['prototype']['_marketEvent']=function(_0xe4c616,_0xfb0f86){var _0x41c89a=[];for(var _0x5b1a97=0x2;_0x3ebe2a['jVrkG'](_0x5b1a97,arguments['length']);_0x5b1a97++){_0x41c89a[_0x3ebe2a['PJcVT'](_0x5b1a97,0x2)]=arguments[_0x5b1a97];}if(_0x3ebe2a['hRUgR'](_0xfb0f86,0x1)){for(var _0x5aa6a6=0x0,_0x1ec09a=_0x41c89a;_0x3ebe2a['jVrkG'](_0x5aa6a6,_0x1ec09a['length']);_0x5aa6a6++){var _0x51c0a6=_0x1ec09a[_0x5aa6a6];_0x51c0a6['shift']();var _0x52f2d6=_0x51c0a6['shift']();var _0x298592=_0x52f2d6['shift']();var _0x482c92=_0x298592['shift']();this['emit'](_0x482c92,_0xe4c616,_0xfb0f86,_0x298592);}}else{var _0x27bebd=_0x41c89a['shift']();for(var _0xe76642 in _0x27bebd){if(_0x3ebe2a['YOYkH'](_0x27bebd[_0xe76642],null)){var _0x136a7f=_0x27bebd[_0xe76642];var _0x417194=_0x136a7f[0x0];this['emit'](PoloniexConstants_1['PoloniexConstants']['TICKEREVENT'],_0x417194,_0x136a7f);}}}};return _0x14d219;}(EventEmiter);exports['PoloniexProxy']=PoloniexProxy;
//# sourceMappingURL=PoloniexProxy.js.map