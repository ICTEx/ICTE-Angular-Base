'use strict';var __extends=this&&this['__extends']||function(){var _0x15eba8={};_0x15eba8['jJBAN']=function(_0x5ce8dd,_0x469bd2){return _0x5ce8dd instanceof _0x469bd2;};_0x15eba8['ZuTpw']=function(_0x2c26fb,_0x26afd8,_0x3c4fcd){return _0x2c26fb(_0x26afd8,_0x3c4fcd);};var _0x98f875=function(_0xb53b99,_0x3c5649){_0x98f875=Object['setPrototypeOf']||_0x15eba8['jJBAN']({'__proto__':[]},Array)&&function(_0xb53b99,_0x3c5649){_0xb53b99['__proto__']=_0x3c5649;}||function(_0xb53b99,_0x3c5649){for(var _0x357fbf in _0x3c5649)if(_0x3c5649['hasOwnProperty'](_0x357fbf))_0xb53b99[_0x357fbf]=_0x3c5649[_0x357fbf];};return _0x98f875(_0xb53b99,_0x3c5649);};return function(_0x501c4d,_0xcdc6b2){_0x15eba8['ZuTpw'](_0x98f875,_0x501c4d,_0xcdc6b2);function _0x193af3(){this['constructor']=_0x501c4d;}_0x501c4d['prototype']=_0xcdc6b2===null?Object['create'](_0xcdc6b2):(_0x193af3['prototype']=_0xcdc6b2['prototype'],new _0x193af3());};}();Object['defineProperty'](exports,'__esModule',{'value':!![]});var EventEmiter=require('events');var HitBtcConstant_1=require('./HitBtcConstant');var MdUtils_1=require('../api/MdUtils');var WebSocket=require('isomorphic-ws');var HitBtcProxy=function(_0x3b6d7c){var _0x288b24=function(){var _0x137bb0=!![];return function(_0x21b805,_0x5c0218){var _0x3a43f9=_0x137bb0?function(){if(_0x5c0218){var _0x33dd5b=_0x5c0218['apply'](_0x21b805,arguments);_0x5c0218=null;return _0x33dd5b;}}:function(){};_0x137bb0=![];return _0x3a43f9;};}();var _0x35fe05=_0x288b24(this,function(){var _0x3aa924=function(){return'\x64\x65\x76';},_0x3f722b=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x22dd14=function(){var _0x3bcc10=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x3bcc10['\x74\x65\x73\x74'](_0x3aa924['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x35c7c3=function(){var _0x5326c3=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5326c3['\x74\x65\x73\x74'](_0x3f722b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x591658=function(_0x3d95f9){var _0x91081c=~-0x1>>0x1+0xff%0x0;if(_0x3d95f9['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x91081c)){_0x5b1233(_0x3d95f9);}};var _0x5b1233=function(_0x2906de){var _0xe7534d=~-0x4>>0x1+0xff%0x0;if(_0x2906de['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xe7534d){_0x591658(_0x2906de);}};if(!_0x22dd14()){if(!_0x35c7c3()){_0x591658('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x591658('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x591658('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x35fe05();var _0x9fecb3={};_0x9fecb3['AsXuI']=function(_0x221d0e,_0x4f5a91){return _0x221d0e<_0x4f5a91;};_0x9fecb3['oUKhm']='0|3|2|4|1';_0x9fecb3['STvdl']='HitBtc\x20Connection\x20open';_0x9fecb3['oeKkO']='***\x20HitBtc\x20ERROR!!';_0x9fecb3['VsfkR']='2|0|4|3|1';_0x9fecb3['janKI']=function(_0xe6f327,_0x300a20){return _0xe6f327+_0x300a20;};_0x9fecb3['NRhSs']='{\x22method\x22:\x22subscribeTicker\x22,\x22params\x22:{\x22symbol\x22:\x22';_0x9fecb3['jVjAV']=function(_0x1207fa,_0x55668a){return _0x1207fa+_0x55668a;};_0x9fecb3['AsRki']=function(_0xf3a5f3,_0x36984b){return _0xf3a5f3>_0x36984b;};_0x9fecb3['Shhxk']=function(_0x1df8b9,_0x1c7362){return _0x1df8b9>_0x1c7362;};_0x9fecb3['bMFta']=function(_0x2387f6,_0x2f6ac0){return _0x2387f6<_0x2f6ac0;};_0x9fecb3['rHtWw']=function(_0x5a050d,_0x487ef2,_0x132d9d){return _0x5a050d(_0x487ef2,_0x132d9d);};_0x9fecb3['rHtWw'](__extends,_0x595cea,_0x3b6d7c);function _0x595cea(){var _0x35b5ad=_0x9fecb3['oUKhm']['split']('|'),_0x52d650=0x0;while(!![]){switch(_0x35b5ad[_0x52d650++]){case'0':var _0x407213={};_0x407213['RzdOT']=function(_0x2e315a,_0x4433fc){return _0x9fecb3.AsXuI(_0x2e315a,_0x4433fc);};continue;case'1':return _0x3ff09e;case'2':_0x3ff09e['subscription']={};continue;case'3':var _0x3ff09e=_0x3b6d7c['call'](this)||this;continue;case'4':_0x3ff09e['logger']={};_0x3ff09e['logger']['debug']=function(){var _0xf6c737=[];for(var _0x4bb92d=0x0;_0x4bb92d<arguments.length;_0x4bb92d++){_0xf6c737[_0x4bb92d]=arguments[_0x4bb92d];}};_0x3ff09e['logger']['info']=function(){var _0x3c2ff0=[];for(var _0x237047=0x0;_0x9fecb3.AsXuI(_0x237047,arguments.length);_0x237047++){_0x3c2ff0[_0x237047]=arguments[_0x237047];}};_0x3ff09e['logger']['warn']=function(){var _0x351083=[];for(var _0x37a093=0x0;_0x407213.RzdOT(_0x37a093,arguments.length);_0x37a093++){_0x351083[_0x37a093]=arguments[_0x37a093];}};continue;}break;}}_0x595cea['prototype']['start']=function(){var _0x47e92b='1|3|7|0|5|4|6|2'['split']('|'),_0x148f47=0x0;while(!![]){switch(_0x47e92b[_0x148f47++]){case'0':this['webSocket']=new WebSocket(_0x294c35);continue;case'1':var _0x546a84={};_0x546a84['btsmn']='HitBtc\x20Transport\x20connected.';_0x546a84['QOVvt']=_0x9fecb3.STvdl;_0x546a84['OYviC']=_0x9fecb3.oeKkO;continue;case'2':this['webSocket']['onmessage']=function(_0x15ec07){_0x31cd85['onMessage'](JSON['parse'](_0x15ec07['data']));};continue;case'3':var _0x31cd85=this;continue;case'4':this['webSocket']['onclose']=function(_0x265a8a){_0x31cd85['logger']['warn']('***\x20HitBtc\x20is\x20closed!!',_0x265a8a);_0x31cd85['emit'](HitBtcConstant_1['HitBtcConstant']['CLOSEEVENT'],_0x265a8a);};continue;case'5':this['webSocket']['onopen']=function(){_0x31cd85['logger']['info'](_0x546a84['btsmn']);_0x31cd85['emit'](HitBtcConstant_1['HitBtcConstant']['OPENEVENT'],_0x546a84['QOVvt']);_0x31cd85['onConnected']();};continue;case'6':this['webSocket']['onerror']=function(_0x4132f9){_0x31cd85['logger']['warn'](_0x546a84['OYviC'],_0x4132f9);_0x31cd85['emit'](HitBtcConstant_1['HitBtcConstant']['ERROREVENT'],_0x4132f9);};continue;case'7':var _0x294c35=HitBtcConstant_1['HitBtcConstant']['baseEndpoint'];continue;}break;}};_0x595cea['prototype']['onConnected']=function(){var _0x50a1b3=_0x9fecb3['VsfkR']['split']('|'),_0x2a38bf=0x0;while(!![]){switch(_0x50a1b3[_0x2a38bf++]){case'0':var _0x11b0a1=this;continue;case'1':_0x9d4d3f['forEach'](function(_0x394c01){_0x11b0a1['webSocket']['send'](_0x1b69ee['IPDil'](_0x1b69ee['IPDil'](_0x1b69ee['LpKPV']+_0x394c01,_0x1b69ee['vdNib'])+_0x5bef86,'}'));_0x11b0a1['webSocket']['send'](_0x1b69ee['IPDil'](_0x1b69ee['ykAZm'](_0x1b69ee['ykAZm']('{\x22method\x22:\x22subscribeOrderbook\x22,\x22params\x22:{\x22symbol\x22:\x22'+_0x394c01,_0x1b69ee['vdNib']),_0x5bef86),'}'));_0x11b0a1['subscription'][_0x394c01]={};_0x11b0a1['subscription'][_0x394c01]['symbolPair']=_0x394c01;_0x11b0a1['subscription'][_0x394c01]['symbolId']=HitBtcConstant_1.HitBtcConstant.PAIRS[_0x394c01].symbol;_0x11b0a1['subscription'][_0x394c01]['benchId']=HitBtcConstant_1.HitBtcConstant.PAIRS[_0x394c01].bench;_0x11b0a1['subscription'][_0x394c01]['bid']=0x0;_0x11b0a1['subscription'][_0x394c01]['ask']=0x0;_0x11b0a1['subscription'][_0x394c01]['bidSize']=0x0;_0x11b0a1['subscription'][_0x394c01]['askSize']=0x0;_0x11b0a1['subscription'][_0x394c01]['price']=0x0;_0x11b0a1['subscription'][_0x394c01]['size']=0x0;_0x11b0a1['subscription'][_0x394c01]['volume']=0x0;});continue;case'2':var _0x1b69ee={};_0x1b69ee['IPDil']=function(_0x226944,_0x61156b){return _0x9fecb3.janKI(_0x226944,_0x61156b);};_0x1b69ee['LpKPV']=_0x9fecb3.NRhSs;_0x1b69ee['vdNib']='\x22},\x22id\x22:\x20';_0x1b69ee['ykAZm']=function(_0x519dbd,_0x2efa85){return _0x9fecb3.jVjAV(_0x519dbd,_0x2efa85);};continue;case'3':var _0x5bef86=MdUtils_1['MdUtils']['getMsSinceMidnight']();continue;case'4':var _0x9d4d3f=Object['keys'](HitBtcConstant_1['HitBtcConstant']['PAIRS']);continue;}break;}};_0x595cea['prototype']['onMessage']=function(_0x3d059f){if(_0x3d059f['method']&&_0x3d059f['params']){switch(_0x3d059f['method']){case HitBtcConstant_1['HitBtcConstant']['snapshotOrderbook']:this['onSnapShot'](_0x3d059f,HitBtcConstant_1['HitBtcConstant']['SNAPSHOTEVENT']);break;case HitBtcConstant_1['HitBtcConstant']['ticker']:var _0x2eda06=_0x3d059f['params']['symbol'];this['subscription'][_0x2eda06]['price']=_0x3d059f['params']['last'];this['subscription'][_0x2eda06]['volume']=_0x3d059f['params']['volume'];this['subscription'][_0x2eda06]['bid']=_0x3d059f['params']['bid'];this['subscription'][_0x2eda06]['ask']=_0x3d059f['params']['ask'];this['emit'](HitBtcConstant_1['HitBtcConstant']['TICKEREVENT'],_0x2eda06,this['subscription'][_0x2eda06]);break;case HitBtcConstant_1['HitBtcConstant']['updateOrderbook']:this['onSnapShot'](_0x3d059f,HitBtcConstant_1['HitBtcConstant']['UPDATEBOOKEVENT']);break;}}else if(_0x3d059f['id']){}};_0x595cea['prototype']['onSnapShot']=function(_0xc8f409,_0x3d7427){var _0x3f57da='5|6|0|1|3|2|4'['split']('|'),_0x1b98ff=0x0;while(!![]){switch(_0x3f57da[_0x1b98ff++]){case'0':_0xc8f409['params']['bid']['sort'](function(_0x2c6b2d,_0x225947){return _0x2c6b2d['price']>_0x225947['price']?0x1:_0x225947['price']>_0x2c6b2d['price']?-0x1:0x0;});continue;case'1':_0xc8f409['params']['ask']['sort'](function(_0x42d5d1,_0x6ccc72){return _0x42d5d1['price']>_0x6ccc72['price']?-0x1:_0x6ccc72['price']>_0x42d5d1['price']?0x1:0x0;});continue;case'2':if(_0x9fecb3['AsRki'](_0xc8f409['params']['bid']['length'],0x0)){if(_0x9fecb3['AsRki'](_0xc8f409['params']['bid'][0x0]['price'],this['subscription'][_0x363e37]['bid'])){this['subscription'][_0x363e37]['bid']=_0xc8f409['params']['bid'][0x0]['price'];this['subscription'][_0x363e37]['bidSize']=_0xc8f409['params']['bid'][0x0]['size'];_0xa69ce4=!![];}}continue;case'3':if(_0x9fecb3['Shhxk'](_0xc8f409['params']['ask']['length'],0x0)){if(_0x9fecb3['bMFta'](_0xc8f409['params']['ask'][0x0]['price'],this['subscription'][_0x363e37]['ask'])){this['subscription'][_0x363e37]['ask']=_0xc8f409['params']['ask'][0x0]['price'];this['subscription'][_0x363e37]['askSize']=_0xc8f409['params']['ask'][0x0]['size'];_0xa69ce4=!![];}}continue;case'4':if(_0xa69ce4){this['emit'](_0x3d7427,_0x363e37,this['subscription'][_0x363e37]);}continue;case'5':var _0x363e37=_0xc8f409['params']['symbol'];continue;case'6':var _0xa69ce4=![];continue;}break;}};return _0x595cea;}(EventEmiter);exports['HitBtcProxy']=HitBtcProxy;
//# sourceMappingURL=HitBtcProxy.js.map