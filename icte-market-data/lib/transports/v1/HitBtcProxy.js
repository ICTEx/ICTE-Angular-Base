'use strict';var __extends=this&&this['__extends']||function(){var _0x1f2e3e={};_0x1f2e3e['jJwvK']=function(_0xd2c051,_0x2c0d69){return _0xd2c051 instanceof _0x2c0d69;};_0x1f2e3e['sAgOw']=function(_0x57b692,_0x4130d2,_0xdee0d4){return _0x57b692(_0x4130d2,_0xdee0d4);};_0x1f2e3e['peeNJ']=function(_0x49a7a3,_0x1c4d08){return _0x49a7a3===_0x1c4d08;};var _0x2bc805=function(_0x4a772d,_0x18ebc2){_0x2bc805=Object['setPrototypeOf']||_0x1f2e3e['jJwvK']({'__proto__':[]},Array)&&function(_0x4a772d,_0x18ebc2){_0x4a772d['__proto__']=_0x18ebc2;}||function(_0x4a772d,_0x18ebc2){for(var _0x556ebc in _0x18ebc2)if(_0x18ebc2['hasOwnProperty'](_0x556ebc))_0x4a772d[_0x556ebc]=_0x18ebc2[_0x556ebc];};return _0x1f2e3e['sAgOw'](_0x2bc805,_0x4a772d,_0x18ebc2);};return function(_0x5b2583,_0x2a2afd){_0x2bc805(_0x5b2583,_0x2a2afd);function _0x1412ad(){this['constructor']=_0x5b2583;}_0x5b2583['prototype']=_0x1f2e3e['peeNJ'](_0x2a2afd,null)?Object['create'](_0x2a2afd):(_0x1412ad['prototype']=_0x2a2afd['prototype'],new _0x1412ad());};}();Object['defineProperty'](exports,'__esModule',{'value':!![]});var EventEmiter=require('events');var HitBtcConstant_1=require('./HitBtcConstant');var MdUtils_1=require('../api/MdUtils');var WebSocket=require('isomorphic-ws');var HitBtcProxy=function(_0x4bf339){var _0x5eeb70={};_0x5eeb70['mDawj']='HitBtc\x20Transport\x20connected';_0x5eeb70['VWDrW']='0|3|4|1|2';_0x5eeb70['XCAzY']=function(_0x277322,_0x3860cd){return _0x277322+_0x3860cd;};_0x5eeb70['jWaUd']='\x22},\x22id\x22:\x20';_0x5eeb70['gtdxL']=function(_0x528e85,_0x144658){return _0x528e85>_0x144658;};_0x5eeb70['nXQef']='4|9|0|8|2|6|1|7|3|5';_0x5eeb70['vMkLl']=function(_0x423650,_0x505f73){return _0x423650>=_0x505f73;};_0x5eeb70['jYAPW']=function(_0x439b2e,_0x261907){return _0x439b2e==_0x261907;};_0x5eeb70['lekue']=function(_0x422d97,_0xcd4411){return _0x422d97>_0xcd4411;};_0x5eeb70['WTjOv']=function(_0x33bdd3,_0x19119c){return _0x33bdd3>_0x19119c;};_0x5eeb70['PZbPD']=function(_0x40266c,_0x3638a6){return _0x40266c<_0x3638a6;};_0x5eeb70['YRsNs']=function(_0x527c26,_0x5c3bf9){return _0x527c26-_0x5c3bf9;};_0x5eeb70['krHdz']=function(_0x4a27e1,_0x171ad8){return _0x4a27e1>=_0x171ad8;};_0x5eeb70['zbOvE']=function(_0x3f56fe,_0x1db079,_0x4bda98){return _0x3f56fe(_0x1db079,_0x4bda98);};_0x5eeb70['zbOvE'](__extends,_0x6983c6,_0x4bf339);function _0x6983c6(){var _0xf7d053=_0x4bf339['call'](this)||this;_0xf7d053['subscription']={};return _0xf7d053;}_0x6983c6['prototype']['start']=function(){var _0x4d5aa0={};_0x4d5aa0['BnFnt']=_0x5eeb70.mDawj;var _0x2beabf=this;var _0x58e48e=HitBtcConstant_1['HitBtcConstant']['baseEndpoint'];this['webSocket']=new WebSocket(_0x58e48e);this['webSocket']['onopen']=function(){_0x2beabf['emit'](HitBtcConstant_1['HitBtcConstant']['OPENEVENT'],_0x4d5aa0['BnFnt']);_0x2beabf['onConnected']();};this['webSocket']['onclose']=function(_0x577e9b){_0x2beabf['emit'](HitBtcConstant_1['HitBtcConstant']['CLOSEEVENT'],_0x577e9b);};this['webSocket']['onerror']=function(_0x3a2031){_0x2beabf['emit'](HitBtcConstant_1['HitBtcConstant']['ERROREVENT'],_0x3a2031);};this['webSocket']['onmessage']=function(_0x1d160e){_0x2beabf['onMessage'](JSON['parse'](_0x1d160e['data']));};};_0x6983c6['prototype']['onConnected']=function(){var _0x1171aa=_0x5eeb70['VWDrW']['split']('|'),_0x3266c4=0x0;while(!![]){switch(_0x1171aa[_0x3266c4++]){case'0':var _0x5a8865={};_0x5a8865['hNkBk']=function(_0x556fd9,_0x229beb){return _0x5eeb70.XCAzY(_0x556fd9,_0x229beb);};_0x5a8865['KyJkt']=function(_0x544842,_0x38d958){return _0x5eeb70.XCAzY(_0x544842,_0x38d958);};_0x5a8865['TXBqc']=_0x5eeb70.jWaUd;_0x5a8865['XjyTv']=function(_0x3770c4,_0x16394a){return _0x5eeb70.XCAzY(_0x3770c4,_0x16394a);};_0x5a8865['iRmuZ']=function(_0x53b39a,_0xbf31c6){return _0x53b39a+_0xbf31c6;};_0x5a8865['vVXaJ']='{\x22method\x22:\x22subscribeOrderbook\x22,\x22params\x22:{\x22symbol\x22:\x22';continue;case'1':var _0x486f81=MdUtils_1['MdUtils']['getMsSinceMidnight']();continue;case'2':_0x2a65b3['forEach'](function(_0x40f51e){_0x4a5942['webSocket']['send'](_0x5a8865['hNkBk'](_0x5a8865['KyJkt'](_0x5a8865['KyJkt']('{\x22method\x22:\x22subscribeTicker\x22,\x22params\x22:{\x22symbol\x22:\x22'+_0x40f51e,_0x5a8865['TXBqc']),_0x486f81),'}'));_0x4a5942['webSocket']['send'](_0x5a8865['XjyTv'](_0x5a8865['iRmuZ'](_0x5a8865['iRmuZ'](_0x5a8865['iRmuZ'](_0x5a8865['vVXaJ'],_0x40f51e),_0x5a8865['TXBqc']),_0x486f81),'}'));_0x4a5942['subscription'][_0x40f51e]={};_0x4a5942['subscription'][_0x40f51e]['symbolPair']=_0x40f51e;_0x4a5942['subscription'][_0x40f51e]['symbolId']=HitBtcConstant_1.HitBtcConstant.PAIRS[_0x40f51e].symbol;_0x4a5942['subscription'][_0x40f51e]['benchId']=HitBtcConstant_1.HitBtcConstant.PAIRS[_0x40f51e].bench;_0x4a5942['subscription'][_0x40f51e]['bid']=0x0;_0x4a5942['subscription'][_0x40f51e]['ask']=0x0;_0x4a5942['subscription'][_0x40f51e]['bidSize']=0x0;_0x4a5942['subscription'][_0x40f51e]['askSize']=0x0;_0x4a5942['subscription'][_0x40f51e]['price']=0x0;_0x4a5942['subscription'][_0x40f51e]['size']=0x0;_0x4a5942['subscription'][_0x40f51e]['volume']=0x0;});continue;case'3':var _0x4a5942=this;continue;case'4':var _0x2a65b3=Object['keys'](HitBtcConstant_1['HitBtcConstant']['PAIRS']);continue;}break;}};_0x6983c6['prototype']['onMessage']=function(_0x371ee3){if(_0x371ee3['method']&&_0x371ee3['params']){switch(_0x371ee3['method']){case HitBtcConstant_1['HitBtcConstant']['snapshotOrderbook']:this['onSnapShot'](_0x371ee3,HitBtcConstant_1['HitBtcConstant']['SNAPSHOTEVENT']);break;case HitBtcConstant_1['HitBtcConstant']['ticker']:var _0x3208c3=_0x371ee3['params']['symbol'];this['subscription'][_0x3208c3]['price']=_0x371ee3['params']['last'];this['subscription'][_0x3208c3]['volume']=_0x371ee3['params']['volume'];this['subscription'][_0x3208c3]['bid']=_0x371ee3['params']['bid'];this['subscription'][_0x3208c3]['ask']=_0x371ee3['params']['ask'];this['emit'](HitBtcConstant_1['HitBtcConstant']['TICKEREVENT'],_0x3208c3,this['subscription'][_0x3208c3]);break;case HitBtcConstant_1['HitBtcConstant']['updateOrderbook']:this['onSnapShot'](_0x371ee3,HitBtcConstant_1['HitBtcConstant']['UPDATEBOOKEVENT']);break;}}else if(_0x371ee3['id']){}};_0x6983c6['prototype']['onSnapShot']=function(_0x7e5eb7,_0x4055d6){var _0x3d6ebc=_0x5eeb70['nXQef']['split']('|'),_0x10dd61=0x0;while(!![]){switch(_0x3d6ebc[_0x10dd61++]){case'0':var _0x524115=![];continue;case'1':_0x7e5eb7['params']['ask']['sort'](function(_0x182471,_0x4b81c3){return _0x182471['price']>_0x4b81c3['price']?-0x1:_0x473cda['AhLIc'](_0x4b81c3['price'],_0x182471['price'])?0x1:0x0;});continue;case'2':for(var _0x4f7bd9=_0x7e5eb7['params']['ask']['length']-0x1;_0x5eeb70['vMkLl'](_0x4f7bd9,0x0);--_0x4f7bd9){if(_0x5eeb70['jYAPW'](_0x7e5eb7['params']['ask'][_0x4f7bd9]['price'],0x0)){_0x7e5eb7['params']['ask']['splice'](_0x4f7bd9,0x1);}if(_0x5eeb70['jYAPW'](_0x7e5eb7['params']['ask'][_0x4f7bd9]['size'],0x0)){_0x7e5eb7['params']['ask']['splice'](_0x4f7bd9,0x1);}}continue;case'3':if(_0x5eeb70['gtdxL'](_0x7e5eb7['params']['bid']['length'],0x0)){if(_0x5eeb70['lekue'](_0x7e5eb7['params']['bid'][0x0]['price'],this['subscription'][_0x4c6d90]['bid'])){this['subscription'][_0x4c6d90]['bid']=_0x7e5eb7['params']['bid'][0x0]['price'];this['subscription'][_0x4c6d90]['bidSize']=_0x7e5eb7['params']['bid'][0x0]['size'];_0x524115=!![];}}continue;case'4':var _0x473cda={};_0x473cda['AhLIc']=function(_0x84287,_0x42fd7f){return _0x5eeb70.WTjOv(_0x84287,_0x42fd7f);};continue;case'5':if(_0x524115){this['emit'](_0x4055d6,_0x4c6d90,this['subscription'][_0x4c6d90]);}continue;case'6':_0x7e5eb7['params']['bid']['sort'](function(_0x17b3b2,_0x2197d2){return _0x5eeb70['gtdxL'](_0x17b3b2['price'],_0x2197d2['price'])?0x1:_0x5eeb70['gtdxL'](_0x2197d2['price'],_0x17b3b2['price'])?-0x1:0x0;});continue;case'7':if(_0x7e5eb7['params']['ask']['length']>0x0){if(_0x5eeb70['PZbPD'](_0x7e5eb7['params']['ask'][0x0]['price'],this['subscription'][_0x4c6d90]['ask'])){this['subscription'][_0x4c6d90]['ask']=_0x7e5eb7['params']['ask'][0x0]['price'];this['subscription'][_0x4c6d90]['askSize']=_0x7e5eb7['params']['ask'][0x0]['size'];_0x524115=!![];}}continue;case'8':for(var _0x4f7bd9=_0x5eeb70['YRsNs'](_0x7e5eb7['params']['bid']['length'],0x1);_0x5eeb70['krHdz'](_0x4f7bd9,0x0);--_0x4f7bd9){if(_0x7e5eb7['params']['bid'][_0x4f7bd9]['price']==0x0){_0x7e5eb7['params']['bid']['splice'](_0x4f7bd9,0x1);}if(_0x5eeb70['jYAPW'](_0x7e5eb7['params']['bid'][_0x4f7bd9]['size'],0x0)){_0x7e5eb7['params']['bid']['splice'](_0x4f7bd9,0x1);}}continue;case'9':var _0x4c6d90=_0x7e5eb7['params']['symbol'];continue;}break;}};return _0x6983c6;}(EventEmiter);exports['HitBtcProxy']=HitBtcProxy;