'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});var MdConstant_1=require('../api/MdConstant');var MsgFactory_1=require('./MsgFactory');var PoloniexProxy_1=require('./PoloniexProxy');var PoloniexConstants_1=require('./PoloniexConstants');var PoloniexTransport=function(){var _0x3bdb69=function(){var _0xe89950=!![];return function(_0x312fb7,_0x1ff04d){var _0x264a99=_0xe89950?function(){if(_0x1ff04d){var _0x5a5a6d=_0x1ff04d['apply'](_0x312fb7,arguments);_0x1ff04d=null;return _0x5a5a6d;}}:function(){};_0xe89950=![];return _0x264a99;};}();var _0x105d5c=_0x3bdb69(this,function(){var _0x34d057=function(){return'\x64\x65\x76';},_0x35d3fa=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3d9d1f=function(){var _0x5e168d=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5e168d['\x74\x65\x73\x74'](_0x34d057['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x196af6=function(){var _0x2c50e9=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2c50e9['\x74\x65\x73\x74'](_0x35d3fa['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xcd0d12=function(_0x774526){var _0x953f56=~-0x1>>0x1+0xff%0x0;if(_0x774526['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x953f56)){_0x4cae20(_0x774526);}};var _0x4cae20=function(_0x2bfcbc){var _0x1d57fd=~-0x4>>0x1+0xff%0x0;if(_0x2bfcbc['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1d57fd){_0xcd0d12(_0x2bfcbc);}};if(!_0x3d9d1f()){if(!_0x196af6()){_0xcd0d12('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0xcd0d12('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0xcd0d12('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x105d5c();var _0x3c046c={};_0x3c046c['DSwhx']=function(_0x106820,_0x20dc6e){return _0x106820<_0x20dc6e;};_0x3c046c['EZouh']=function(_0x188db8,_0x12fd2b){return _0x188db8<_0x12fd2b;};_0x3c046c['eRBgs']=function(_0x3894ba,_0x5ac1e4){return _0x3894ba+_0x5ac1e4;};_0x3c046c['geErU']='3|0|6|4|5|2|8|1|7';_0x3c046c['oCHYo']=function(_0x117878,_0x3848c2){return _0x117878===_0x3848c2;};_0x3c046c['Alddl']=function(_0x209f73,_0x27f1c9){return _0x209f73*_0x27f1c9;};_0x3c046c['cBsNy']=function(_0xaa5883,_0x3ea7a4){return _0xaa5883%_0x3ea7a4;};_0x3c046c['PyPMQ']=function(_0x2dfd1a,_0x16ba18){return _0x2dfd1a*_0x16ba18;};_0x3c046c['ItDSO']=function(_0x24233d,_0x3bba60){return _0x24233d*_0x3bba60;};_0x3c046c['PUpnl']=function(_0x2997cd,_0x4cdd0e){return _0x2997cd%_0x4cdd0e;};_0x3c046c['XMhTB']=function(_0x1255d9,_0x328dac){return _0x1255d9%_0x328dac;};_0x3c046c['JneQe']=function(_0x350538,_0x3f0d5b){return _0x350538!=_0x3f0d5b;};_0x3c046c['VnRDu']='8|6|3|5|4|2|0|1|7';_0x3c046c['owTeC']=function(_0x5913f0,_0x3d2f85){return _0x5913f0%_0x3d2f85;};_0x3c046c['aeUDA']=function(_0x38e3a6,_0x1ced4f){return _0x38e3a6(_0x1ced4f);};_0x3c046c['hafUw']=function(_0x365c48,_0x3fdf73){return _0x365c48!=_0x3fdf73;};_0x3c046c['Gyizc']='5|1|2|3|4|6|0';_0x3c046c['ppvmE']=function(_0x410be5,_0x3c3d6e){return _0x410be5!=_0x3c3d6e;};_0x3c046c['lBONN']=function(_0x508e47,_0x531c2c){return _0x508e47===_0x531c2c;};_0x3c046c['WfZHB']=function(_0x2e508b,_0x422fd4){return _0x2e508b>_0x422fd4;};_0x3c046c['vtKUp']=function(_0x405980,_0x4fd2b9){return _0x405980%_0x4fd2b9;};_0x3c046c['bklwf']=function(_0x156bf0,_0x7609f6){return _0x156bf0*_0x7609f6;};_0x3c046c['beGep']=function(_0x1d71d7,_0x402e48){return _0x1d71d7*_0x402e48;};_0x3c046c['ausTW']=function(_0x115589,_0x148690){return _0x115589-_0x148690;};function _0x3d9a32(_0x54babf){var _0x310452={};_0x310452['poYhh']=function(_0x45108d,_0x41fcf2){return _0x3c046c.ppvmE(_0x45108d,_0x41fcf2);};_0x310452['QmplZ']=function(_0x204957,_0x2e7721){return _0x3c046c.lBONN(_0x204957,_0x2e7721);};_0x310452['zedYn']=function(_0x48e064,_0x59215c){return _0x3c046c.WfZHB(_0x48e064,_0x59215c);};_0x310452['ctbUR']=function(_0x47f432,_0xabf11d){return _0x47f432*_0xabf11d;};_0x310452['ZUuTM']=function(_0x5980b6,_0x5d7287){return _0x3c046c.vtKUp(_0x5980b6,_0x5d7287);};_0x310452['UqdcL']=function(_0x40ed65,_0x3f9bcc){return _0x40ed65*_0x3f9bcc;};_0x310452['VILTY']=function(_0x27ff19,_0x102a71){return _0x27ff19%_0x102a71;};_0x310452['xYMls']=function(_0x5bc597,_0x15b27c){return _0x3c046c.EZouh(_0x5bc597,_0x15b27c);};_0x310452['vxfSM']=function(_0x24987f,_0x4e416b){return _0x3c046c.bklwf(_0x24987f,_0x4e416b);};_0x310452['gTSRa']=function(_0x17d515,_0x91f7c1){return _0x3c046c.beGep(_0x17d515,_0x91f7c1);};_0x310452['BiezI']=function(_0x133d70,_0x2fd298){return _0x3c046c.vtKUp(_0x133d70,_0x2fd298);};var _0x253bc0=this;this['subscriptions']={};this['_connected']=![];this['subscribe']=function(_0x5661e4){var _0x5e313f=[];for(var _0x7c8039=0x0;_0x3c046c['DSwhx'](_0x7c8039,MdConstant_1['MdConstant']['COINS']['length']);_0x7c8039++){for(var _0x1595b3=0x0;_0x3c046c['EZouh'](_0x1595b3,MdConstant_1['MdConstant']['COINS']['length']);_0x1595b3++){var _0x52f78b=_0x3c046c['eRBgs'](MdConstant_1['MdConstant']['COINS'][_0x1595b3],'_')+MdConstant_1['MdConstant']['COINS'][_0x7c8039];if(PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]!=null){_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]={};_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['symbol']=MdConstant_1.MdConstant.COINS[_0x7c8039];_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['id']=_0x7c8039;_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['price']=0x0;_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['benchmark']=_0x1595b3;_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['bestBid']=0x0;_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['bestAsk']=0x0;_0x253bc0['subscriptions'][PoloniexConstants_1['PoloniexConstants']['validPairs'][_0x52f78b]]['volume']=0x0;}}}};this['init']=function(){var _0x230f6b=_0x3c046c['geErU']['split']('|'),_0xc78954=0x0;while(!![]){switch(_0x230f6b[_0xc78954++]){case'0':_0x253bc0['poloniex']=new PoloniexProxy_1['PoloniexProxy']();continue;case'1':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['CLOSEEVENT'],function(_0x10c442){_0x253bc0['_connected']=![];});continue;case'2':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['TICKEREVENT'],function(_0x57980f,_0x484b56){if(_0x3cedcc['znztc'](_0x253bc0['subscriptions'][_0x57980f],null)){var _0x2e729c=_0x3cedcc['GwkNM']['split']('|'),_0xcb562c=0x0;while(!![]){switch(_0x2e729c[_0xcb562c++]){case'0':_0x253bc0['cb']['on'](_0x5c91f0);continue;case'1':_0x253bc0['subscriptions'][_0x57980f]['price']=_0x484b56[0x1];continue;case'2':_0x253bc0['subscriptions'][_0x57980f]['bestBid']=_0x484b56[0x3];continue;case'3':_0x253bc0['subscriptions'][_0x57980f]['bestAsk']=_0x484b56[0x2];continue;case'4':_0x253bc0['subscriptions'][_0x57980f]['volume']=_0x484b56[0x6];continue;case'5':var _0x5c91f0=MsgFactory_1['MsgFactory']['level1Msg'];continue;case'6':_0x5c91f0['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0x57980f]['id'],Math['trunc'](_0x253bc0['subscriptions'][_0x57980f]['price']),Math['trunc'](_0x3cedcc['fEnnj'](_0x253bc0['subscriptions'][_0x57980f]['price'],0x1)*0x989680),Math['trunc'](_0x253bc0['subscriptions'][_0x57980f]['bestBid']),Math['trunc'](_0x3cedcc['aannV'](_0x253bc0['subscriptions'][_0x57980f]['bestBid']%0x1,0x989680)),Math['trunc'](_0x253bc0['subscriptions'][_0x57980f]['bestAsk']),Math['trunc'](_0x3cedcc['aannV'](_0x3cedcc['ElkPH'](_0x253bc0['subscriptions'][_0x57980f]['bestAsk'],0x1),0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0x57980f]['benchmark']);continue;}break;}}});continue;case'3':var _0x3cedcc={};_0x3cedcc['XOtgG']=function(_0x4a4910,_0x5968ad){return _0x3c046c.oCHYo(_0x4a4910,_0x5968ad);};_0x3cedcc['kSOba']=function(_0x1bede9,_0x42577b){return _0x3c046c.Alddl(_0x1bede9,_0x42577b);};_0x3cedcc['fwuUU']=function(_0x44722a,_0x3c4e79){return _0x3c046c.cBsNy(_0x44722a,_0x3c4e79);};_0x3cedcc['QylUm']=function(_0x38c612,_0x4bb680){return _0x3c046c.PyPMQ(_0x38c612,_0x4bb680);};_0x3cedcc['rYxYN']=function(_0x2be449,_0xbf449a){return _0x3c046c.ItDSO(_0x2be449,_0xbf449a);};_0x3cedcc['Jwqvg']=function(_0x2e0e44,_0x31540a){return _0x3c046c.PUpnl(_0x2e0e44,_0x31540a);};_0x3cedcc['FdpZR']=function(_0x1a29ae,_0x61782d){return _0x1a29ae*_0x61782d;};_0x3cedcc['dNRoY']=function(_0xc0ea1b,_0x43225f){return _0x3c046c.ItDSO(_0xc0ea1b,_0x43225f);};_0x3cedcc['wgxuq']=function(_0x122efc,_0x5a2b12){return _0x3c046c.XMhTB(_0x122efc,_0x5a2b12);};_0x3cedcc['NyFPl']=function(_0x5e6719,_0x141b51){return _0x3c046c.JneQe(_0x5e6719,_0x141b51);};_0x3cedcc['yrBPW']=_0x3c046c.VnRDu;_0x3cedcc['fEnnj']=function(_0xc82194,_0x738369){return _0x3c046c.owTeC(_0xc82194,_0x738369);};_0x3cedcc['UvRYv']=function(_0x4f90ed,_0x3ce5af){return _0x3c046c.ItDSO(_0x4f90ed,_0x3ce5af);};_0x3cedcc['IQtCo']=function(_0x19ab6a,_0x5ae1f1){return _0x3c046c.aeUDA(_0x19ab6a,_0x5ae1f1);};_0x3cedcc['znztc']=function(_0x229ff3,_0x31f730){return _0x3c046c.hafUw(_0x229ff3,_0x31f730);};_0x3cedcc['GwkNM']=_0x3c046c.Gyizc;_0x3cedcc['aannV']=function(_0x28b851,_0x4feba1){return _0x3c046c.ItDSO(_0x28b851,_0x4feba1);};_0x3cedcc['ElkPH']=function(_0xee8446,_0x3c0cb8){return _0x3c046c.owTeC(_0xee8446,_0x3c0cb8);};continue;case'4':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['QUOTEEVENT'],function(_0x484d74,_0x59e463,_0x23b0f7){if(_0x3cedcc['NyFPl'](_0x253bc0['subscriptions'][_0x484d74],null)){var _0x5236b0=_0x3cedcc['yrBPW']['split']('|'),_0x399768=0x0;while(!![]){switch(_0x5236b0[_0x399768++]){case'0':var _0x3522bb=MsgFactory_1['MsgFactory']['quoteMsg'];continue;case'1':_0x3522bb['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0x484d74]['id'],Math['trunc'](_0x473bac),Math['trunc'](_0x3cedcc['dNRoY'](_0x3cedcc['fEnnj'](_0x473bac,0x1),0x989680)),Math['trunc'](_0x51438d),Math['trunc'](_0x3cedcc['dNRoY'](_0x3cedcc['fEnnj'](_0x51438d,0x1),0x989680)),Math['trunc'](_0x379952),Math['trunc'](_0x3cedcc['dNRoY'](_0x379952%0x1,0x989680)),Math['trunc'](_0x365f22),Math['trunc'](_0x3cedcc['UvRYv'](_0x3cedcc['fEnnj'](_0x365f22,0x1),0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0x484d74]['benchmark']);continue;case'2':var _0x379952=parseFloat(_0x197e55);continue;case'3':var _0x197e55=Object['keys'](_0x23b0f7[0x0]['orderBook'][0x0])[0x0];continue;case'4':var _0x473bac=_0x3cedcc['IQtCo'](parseFloat,_0x2d5c95);continue;case'5':var _0x365f22=_0x23b0f7[0x0]['orderBook'][0x0][_0x197e55];continue;case'6':var _0x51438d=_0x23b0f7[0x0]['orderBook'][0x1][_0x2d5c95];continue;case'7':_0x253bc0['cb']['on'](_0x3522bb);continue;case'8':var _0x2d5c95=Object['keys'](_0x23b0f7[0x0]['orderBook'][0x1])[0x0];continue;}break;}}});continue;case'5':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['ORDEREVENT'],function(_0xe4cae6,_0x5cb0fa,_0xff220d){if(_0x310452['poYhh'](_0x253bc0['subscriptions'][_0xe4cae6],null)){var _0x3d9408=_0xff220d[0x2]===PoloniexConstants_1['PoloniexConstants']['AMOUNT_ZERO']?0x1:0x0;if(_0x310452['QmplZ'](_0x3d9408,0x0)){var _0x1870c1=_0xff220d[0x0];var _0x5d83c6=_0xff220d[0x1];var _0x4ebea8=_0xff220d[0x2];if(_0x1870c1===PoloniexConstants_1['PoloniexConstants']['BID']){if(_0x310452['zedYn'](_0x5d83c6,_0x253bc0['subscriptions'][_0xe4cae6]['bestBid'])){var _0x51b732=MsgFactory_1['MsgFactory']['bidMsg'];_0x253bc0['subscriptions'][_0xe4cae6]['bestBid']=_0x5d83c6;_0x51b732['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0xe4cae6]['id'],Math['trunc'](_0x5d83c6),Math['trunc'](_0x310452['ctbUR'](_0x5d83c6%0x1,0x989680)),Math['trunc'](_0x4ebea8),Math['trunc'](_0x310452['ctbUR'](_0x310452['ZUuTM'](_0x4ebea8,0x1),0x989680)),Math['trunc'](_0x253bc0['subscriptions'][_0xe4cae6]['volume']),Math['trunc'](_0x310452['UqdcL'](_0x310452['VILTY'](_0x253bc0['subscriptions'][_0xe4cae6]['volume'],0x1),0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0xe4cae6]['benchmark']);_0x253bc0['cb']['on'](_0x51b732);}}else{if(_0x310452['xYMls'](_0x5d83c6,_0x253bc0['subscriptions'][_0xe4cae6]['bestAsk'])){var _0x51b732=MsgFactory_1['MsgFactory']['askMsg'];_0x253bc0['subscriptions'][_0xe4cae6]['bestAsk']=_0x5d83c6;_0x51b732['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0xe4cae6]['id'],Math['trunc'](_0x5d83c6),Math['trunc'](_0x310452['vxfSM'](_0x310452['VILTY'](_0x5d83c6,0x1),0x989680)),Math['trunc'](_0x4ebea8),Math['trunc'](_0x310452['gTSRa'](_0x310452['VILTY'](_0x4ebea8,0x1),0x989680)),Math['trunc'](_0x253bc0['subscriptions'][_0xe4cae6]['volume']),Math['trunc'](_0x310452['gTSRa'](_0x310452['BiezI'](_0x253bc0['subscriptions'][_0xe4cae6]['volume'],0x1),0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0xe4cae6]['benchmark']);_0x253bc0['cb']['on'](_0x51b732);}}}}});continue;case'6':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['TRADEEVENT'],function(_0xbc607f,_0x3a57c0,_0x366d7c){var _0x4491dc=_0x366d7c[0x1];if(_0x253bc0['subscriptions'][_0xbc607f]!=null){var _0x5052af=_0x366d7c[0x3];var _0x3e6a68=_0x366d7c[0x2];if(_0x3cedcc['XOtgG'](_0x4491dc,PoloniexConstants_1['PoloniexConstants']['BUY'])){var _0x598929=MsgFactory_1['MsgFactory']['buyMsg'];_0x598929['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0xbc607f]['id'],Math['trunc'](_0x5052af),Math['trunc'](_0x3cedcc['kSOba'](_0x5052af%0x1,0x989680)),Math['trunc'](_0x3e6a68),Math['trunc'](_0x3cedcc['kSOba'](_0x3cedcc['fwuUU'](_0x3e6a68,0x1),0x989680)),Math['trunc'](_0x253bc0['subscriptions'][_0xbc607f]['volume']),Math['trunc'](_0x3cedcc['QylUm'](_0x253bc0['subscriptions'][_0xbc607f]['volume']%0x1,0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0xbc607f]['benchmark']);_0x253bc0['cb']['on'](_0x598929);}else{var _0x598929=MsgFactory_1['MsgFactory']['sellMsg'];_0x598929['buffer'](_0x3d9a32['getMsSinceMidnight'](),_0x253bc0['subscriptions'][_0xbc607f]['id'],Math['trunc'](_0x5052af),Math['trunc'](_0x3cedcc['rYxYN'](_0x3cedcc['Jwqvg'](_0x5052af,0x1),0x989680)),Math['trunc'](_0x3e6a68),Math['trunc'](_0x3cedcc['FdpZR'](_0x3e6a68%0x1,0x989680)),Math['trunc'](_0x253bc0['subscriptions'][_0xbc607f]['volume']),Math['trunc'](_0x3cedcc['dNRoY'](_0x3cedcc['wgxuq'](_0x253bc0['subscriptions'][_0xbc607f]['volume'],0x1),0x989680)),MdConstant_1['MdConstant']['PoloniexTransport'],_0x253bc0['subscriptions'][_0xbc607f]['benchmark']);_0x253bc0['cb']['on'](_0x598929);}}});continue;case'7':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['OPENEVENT'],function(_0x4597b3){_0x253bc0['_connected']=!![];});continue;case'8':_0x253bc0['poloniex']['on'](PoloniexConstants_1['PoloniexConstants']['ERROREVENT'],function(_0x57bca5){});continue;}break;}};this['cb']=_0x54babf;}_0x3d9a32['getMsSinceMidnight']=function(){return _0x3c046c['ausTW'](this['getGmtZeroNow'](),this['getGmtZeroMidnight']());};_0x3d9a32['getGmtZeroNow']=function(){var _0x6f8d68=new Date();var _0x51c5bc=_0x3c046c['eRBgs'](_0x6f8d68['getTime'](),_0x3c046c['beGep'](_0x6f8d68['getTimezoneOffset'](),0xea60));var _0x3a5647=new Date(_0x51c5bc);return _0x3a5647['getTime']();};_0x3d9a32['getGmtZeroMidnight']=function(){var _0x579177=new Date();var _0x3a3561=_0x3c046c['eRBgs'](_0x579177['getTime'](),_0x579177['getTimezoneOffset']()*0xea60);var _0x5daaac=new Date(_0x3a3561);_0x5daaac['setHours'](0x0);_0x5daaac['setMinutes'](0x0);_0x5daaac['setSeconds'](0x0);_0x5daaac['setMilliseconds'](0x0);return _0x5daaac['getTime']();};_0x3d9a32['prototype']['isConnected']=function(){return this['_connected'];};_0x3d9a32['prototype']['connect']=function(_0x90e210){this['subscribe'](_0x90e210);this['init']();};return _0x3d9a32;}();exports['PoloniexTransport']=PoloniexTransport;
//# sourceMappingURL=PoloniexTransport.js.map