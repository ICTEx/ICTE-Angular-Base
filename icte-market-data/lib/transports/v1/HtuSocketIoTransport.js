'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]});var Constant_1=require('../../model/Constant');var TimeMsg_1=require('../../parser/TimeMsg');var BuyMsg_1=require('../../parser/BuyMsg');var SellMsg_1=require('../../parser/SellMsg');var RateMsg_1=require('../../parser/RateMsg');var Utilities_1=require('../../model/Utilities');var WebSocket=require('isomorphic-ws');var HtuSocketIoTransport=function(){var _0xfdf6e1={};_0xfdf6e1['bkzzX']='2|5|3|0|4|1';_0xfdf6e1['WGrzZ']='HtuSocket\x20transport\x20connected';_0xfdf6e1['cpRqS']='utf8';_0xfdf6e1['rlBNT']='ws://186.74.247.202:10750';_0xfdf6e1['lpleE']=function(_0x5877a2,_0x15546b){return _0x5877a2===_0x15546b;};_0xfdf6e1['KKnTZ']='Empty\x20data';_0xfdf6e1['gkkRi']=function(_0x256109,_0x4c436b){return _0x256109+_0x4c436b;};_0xfdf6e1['vbJZm']=function(_0x12bc79,_0x2f45f8){return _0x12bc79==_0x2f45f8;};_0xfdf6e1['kgvjo']=function(_0x3c5ef2,_0x3f35d5){return _0x3c5ef2-_0x3f35d5;};_0xfdf6e1['ZpQks']=function(_0x28cf0a,_0x28a3ff){return _0x28cf0a==_0x28a3ff;};_0xfdf6e1['EzYZM']=function(_0x5b5158,_0x4487ff){return _0x5b5158==_0x4487ff;};_0xfdf6e1['OgTzd']='*\x20HtuSocket:\x20Receive\x20an\x20invalid\x20message\x20-\x20';_0xfdf6e1['orOMk']='***\x20HtuSocket\x20Transport\x20ERROR!!';_0xfdf6e1['pUzFW']='5|4|2|1|3|0';function _0x22c96b(_0x512d3e){var _0x36c739={};_0x36c739['Lngzs']=_0xfdf6e1.bkzzX;_0x36c739['tQSVM']=_0xfdf6e1.WGrzZ;var _0x3070b3=this;this['parsers']=[];this['utf8']=_0xfdf6e1['cpRqS'];this['uri']=_0xfdf6e1['rlBNT'];this['isConnected']=function(){return _0x3070b3['_connected'];};this['connect']=function(_0x33165c){var _0x34c084=_0x36c739['Lngzs']['split']('|'),_0x54cb74=0x0;while(!![]){switch(_0x34c084[_0x54cb74++]){case'0':_0x3070b3['setupIpFsClient']();continue;case'1':_0x3070b3['_connected']=!![];continue;case'2':_0x3070b3['socket']=new WebSocket(_0x3070b3['uri']);continue;case'3':_0x3070b3['subscribe'](_0x33165c);continue;case'4':Utilities_1['Utilities']['logger']['info'](_0x36c739['tQSVM']);continue;case'5':_0x3070b3['setup']();continue;}break;}};this['callback']=_0x512d3e;this['parsers'][Constant_1['Constant']['Msg_Sys']]=[];this['parsers'][Constant_1['Constant']['Msg_Sys']][Constant_1['Constant']['Sub_SysTime']]=new TimeMsg_1['TimeMsg']();this['parsers'][Constant_1['Constant']['Msg_Quote']]=[];this['parsers'][Constant_1['Constant']['Msg_Quote']][Constant_1['Constant']['Sub_Buy']]=new BuyMsg_1['BuyMsg']();this['parsers'][Constant_1['Constant']['Msg_Quote']][Constant_1['Constant']['Sub_Sell']]=new SellMsg_1['SellMsg']();this['parsers'][Constant_1['Constant']['Msg_Quote']][Constant_1['Constant']['Sub_Rate']]=new RateMsg_1['RateMsg']();}_0x22c96b['prototype']['setupIpFsClient']=function(){};_0x22c96b['prototype']['setup']=function(){var _0x243e69=_0xfdf6e1['pUzFW']['split']('|'),_0x31be51=0x0;while(!![]){switch(_0x243e69[_0x31be51++]){case'0':this['socket']['onclose']=function(_0x123bef){Utilities_1['Utilities']['logger']['warn'](_0xce1455['rnjYV'],_0x123bef['code'],_0x123bef['reason']);_0x3b1aeb['_connected']=![];};continue;case'1':this['socket']['onmessage']=function(_0x5352c9){if(_0xfdf6e1['lpleE'](_0x5352c9['data']['length'],0x0))throw new Error(_0xfdf6e1['KKnTZ']);try{var _0x1620b7=_0x5352c9['data']['toString'](_0x3b1aeb['utf8'],Constant_1['Constant']['Fld_Type'],_0xfdf6e1['gkkRi'](Constant_1['Constant']['Fld_Type'],0x1));var _0x1e96b8=_0x5352c9['data']['toString'](_0x3b1aeb['utf8'],Constant_1['Constant']['Fld_SubType'],_0xfdf6e1['gkkRi'](Constant_1['Constant']['Fld_SubType'],0x1));if(_0xfdf6e1['vbJZm'](_0x1620b7,Constant_1['Constant']['Msg_Sys'])&&_0x1e96b8==Constant_1['Constant']['Sub_SysTime']){var _0x36f255=_0x5352c9['data']['toString'](_0x3b1aeb['utf8'],Constant_1['Constant']['Fld_SubType']+0x1,_0xfdf6e1['kgvjo'](_0x5352c9['data']['length'],0x1));var _0x378cd6=_0x3b1aeb['parsers'][_0x1620b7][_0x1e96b8];_0x378cd6['buffer'](_0x36f255);_0x3b1aeb['callback']['on'](_0x378cd6);}else if(_0xfdf6e1['ZpQks'](_0x1620b7,Constant_1['Constant']['Msg_Quote'])&&_0xfdf6e1['EzYZM'](_0x1e96b8,Constant_1['Constant']['Sub_Rate'])){var _0x36f255=_0x5352c9['data']['toString'](_0x3b1aeb['utf8'],Constant_1['Constant']['Fld_SubType']+0x1,_0xfdf6e1['kgvjo'](_0x5352c9['data']['length'],0x1));var _0x378cd6=_0x3b1aeb['parsers'][_0x1620b7][_0x1e96b8];_0x378cd6['buffer'](_0x36f255);_0x3b1aeb['callback']['on'](_0x378cd6);}}catch(_0x5687e9){Utilities_1['Utilities']['logger']['warn'](_0xfdf6e1['gkkRi'](_0xfdf6e1['OgTzd'],_0x5687e9['message']));}};continue;case'2':this['socket']['onopen']=function(_0x24dcde){_0x3b1aeb['_connected']=!![];};continue;case'3':this['socket']['onerror']=function(_0x44fcf1){Utilities_1['Utilities']['logger']['warn'](_0xfdf6e1['orOMk'],_0x44fcf1['message']);};continue;case'4':var _0x3b1aeb=this;continue;case'5':var _0xce1455={};_0xce1455['rnjYV']='**\x20HtuSocket\x20Transport\x20close!!';continue;}break;}};_0x22c96b['prototype']['subscribe']=function(_0x2f849a){this['subs']=_0x2f849a;};return _0x22c96b;}();exports['HtuSocketIoTransport']=HtuSocketIoTransport;